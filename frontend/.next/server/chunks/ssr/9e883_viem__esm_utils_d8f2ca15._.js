module.exports=[59368,a=>{"use strict";var b=a.i(19425),c=a.i(73160);function d(a,d){if(!(0,c.isAddress)(a,{strict:!1}))throw new b.InvalidAddressError({address:a});if(!(0,c.isAddress)(d,{strict:!1}))throw new b.InvalidAddressError({address:d});return a.toLowerCase()===d.toLowerCase()}a.s(["isAddressEqual",()=>d])},63355,a=>{"use strict";var b=a.i(1397),c=a.i(65585),d=a.i(83714),e=a.i(56669),f=a.i(20446),g=a.i(99999),h=a.i(44517),i=a.i(55257),j=a.i(26600),k=a.i(14636);let l="/docs/contract/encodeErrorResult";function m(a){let{abi:b,errorName:c,args:e}=a,g=b[0];if(c){let a=(0,k.getAbiItem)({abi:b,args:e,name:c});if(!a)throw new d.AbiErrorNotFoundError(c,{docsPath:l});g=a}if("error"!==g.type)throw new d.AbiErrorNotFoundError(void 0,{docsPath:l});let m=(0,h.formatAbiItem)(g),n=(0,f.toFunctionSelector)(m),o="0x";if(e&&e.length>0){if(!g.inputs)throw new d.AbiErrorInputsNotFoundError(g.name,{docsPath:l});o=(0,j.encodeAbiParameters)(g.inputs,e)}return(0,i.concatHex)([n,o])}let n="/docs/contract/encodeFunctionResult",o="x-batch-gateway:true";async function p(a){let{data:i,ccipRequest:l}=a,{args:[q]}=function(a){let{abi:b,data:c}=a,i=(0,e.slice)(c,0,4),j=b.find(a=>"function"===a.type&&i===(0,f.toFunctionSelector)((0,h.formatAbiItem)(a)));if(!j)throw new d.AbiFunctionSignatureNotFoundError(i,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:j.name,args:"inputs"in j&&j.inputs&&j.inputs.length>0?(0,g.decodeAbiParameters)(j.inputs,(0,e.slice)(c,4)):void 0}}({abi:b.batchGatewayAbi,data:i}),r=[],s=[];return await Promise.all(q.map(async(a,d)=>{try{s[d]=a.urls.includes(o)?await p({data:a.data,ccipRequest:l}):await l(a),r[d]=!1}catch(a){var e;r[d]=!0,s[d]="HttpRequestError"===(e=a).name&&e.status?m({abi:b.batchGatewayAbi,errorName:"HttpError",args:[e.status,e.shortMessage]}):m({abi:[c.solidityError],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}})),function(a){let{abi:b,functionName:c,result:e}=a,f=b[0];if(c){let a=(0,k.getAbiItem)({abi:b,name:c});if(!a)throw new d.AbiFunctionNotFoundError(c,{docsPath:n});f=a}if("function"!==f.type)throw new d.AbiFunctionNotFoundError(void 0,{docsPath:n});if(!f.outputs)throw new d.AbiFunctionOutputsNotFoundError(f.name,{docsPath:n});let g=(()=>{if(0===f.outputs.length)return[];if(1===f.outputs.length)return[e];if(Array.isArray(e))return e;throw new d.InvalidArrayError(e)})();return(0,j.encodeAbiParameters)(f.outputs,g)}({abi:b.batchGatewayAbi,functionName:"query",result:[r,s]})}a.s(["localBatchGatewayRequest",()=>p,"localBatchGatewayUrl",0,o],63355)},47440,a=>{"use strict";var b=a.i(69442),c=a.i(87676),d=a.i(73048),e=a.i(95442);class f extends d.BaseError{constructor({callbackSelector:a,cause:b,data:c,extraData:d,sender:f,urls:g}){super(b.shortMessage||"An error occurred while fetching for an offchain result.",{cause:b,metaMessages:[...b.metaMessages||[],b.metaMessages?.length?"":[],"Offchain Gateway Call:",g&&["  Gateway URL(s):",...g.map(a=>`    ${(0,e.getUrl)(a)}`)],`  Sender: ${f}`,`  Data: ${c}`,`  Callback selector: ${a}`,`  Extra data: ${d}`].flat(),name:"OffchainLookupError"})}}class g extends d.BaseError{constructor({result:a,url:b}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,e.getUrl)(b)}`,`Response: ${(0,c.stringify)(a)}`],name:"OffchainLookupResponseMalformedError"})}}class h extends d.BaseError{constructor({sender:a,to:b}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${b}`,`OffchainLookup sender address: ${a}`],name:"OffchainLookupSenderMismatchError"})}}var i=a.i(89316),j=a.i(50827),k=a.i(26600),l=a.i(59368),m=a.i(55257),n=a.i(3262),o=a.i(63355);let p={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function q(a,{blockNumber:c,blockTag:d,data:e,to:g}){let{args:i}=(0,j.decodeErrorResult)({data:e,abi:[p]}),[n,q,s,t,u]=i,{ccipRead:v}=a,w=v&&"function"==typeof v?.request?v.request:r;try{if(!(0,l.isAddressEqual)(g,n))throw new h({sender:n,to:g});let e=q.includes(o.localBatchGatewayUrl)?await (0,o.localBatchGatewayRequest)({data:s,ccipRequest:w}):await w({data:s,sender:n,urls:q}),{data:f}=await (0,b.call)(a,{blockNumber:c,blockTag:d,data:(0,m.concat)([t,(0,k.encodeAbiParameters)([{type:"bytes"},{type:"bytes"}],[e,u])]),to:g});return f}catch(a){throw new f({callbackSelector:t,cause:a,data:e,extraData:u,sender:n,urls:q})}}async function r({data:a,sender:b,urls:d}){let e=Error("An unknown error occurred.");for(let f=0;f<d.length;f++){let h=d[f],j=h.includes("{data}")?"GET":"POST",k="POST"===j?{data:a,sender:b}:void 0,l="POST"===j?{"Content-Type":"application/json"}:{};try{let d,f=await fetch(h.replace("{sender}",b.toLowerCase()).replace("{data}",a),{body:JSON.stringify(k),headers:l,method:j});if(d=f.headers.get("Content-Type")?.startsWith("application/json")?(await f.json()).data:await f.text(),!f.ok){e=new i.HttpRequestError({body:k,details:d?.error?(0,c.stringify)(d.error):f.statusText,headers:f.headers,status:f.status,url:h});continue}if(!(0,n.isHex)(d)){e=new g({result:d,url:h});continue}return d}catch(a){e=new i.HttpRequestError({body:k,details:a.message,url:h})}}throw e}a.s(["ccipRequest",()=>r,"offchainLookup",()=>q,"offchainLookupAbiItem",0,p,"offchainLookupSignature",0,"0x556f1830"],47440)}];

//# sourceMappingURL=9e883_viem__esm_utils_d8f2ca15._.js.map