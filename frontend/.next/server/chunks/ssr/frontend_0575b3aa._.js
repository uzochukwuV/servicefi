module.exports=[1395,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactServerDOMTurbopackClient},93846,a=>{"use strict";var b=a.i(57850),c=a.i(13916);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},43293,a=>{"use strict";let b="servicefi_metadata",c=async a=>{try{let b=await fetch("/api/upload-metadata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Failed to upload metadata to IPFS");let c=await b.json();return{...a,ipfsCid:c.cid,ipfsUrl:c.ipfsUrl}}catch(a){throw console.error("Error uploading to IPFS:",a),a}};a.s(["getAllServiceMetadata",0,()=>{try{let a=localStorage.getItem(b);return a?JSON.parse(a):{}}catch(a){return console.error("Error getting all metadata:",a),{}}},"getServiceMetadata",0,a=>{try{let c=localStorage.getItem(b);if(!c)return null;return JSON.parse(c)[a]||null}catch(a){return console.error("Error getting metadata:",a),null}},"saveServiceMetadata",0,(a,c)=>{try{let d=localStorage.getItem(b),e=d?JSON.parse(d):{};e[a]={...c,tokenId:a},localStorage.setItem(b,JSON.stringify(e))}catch(a){console.error("Error saving metadata:",a)}},"uploadMetadataToIPFS",0,c])},41873,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(33198),e=a.i(37993),f=a.i(9744),g=a.i(9097),h=a.i(73946),i=a.i(69728),j=a.i(5720),k=a.i(44754),l=a.i(43317),m=a.i(41298),n=a.i(64513),o=a.i(77440),p=a.i(3369),q=a.i(6245),r="Dialog",[s,t]=(0,f.createContextScope)(r),[u,v]=s(r),w=a=>{let{__scopeDialog:d,children:e,open:f,defaultOpen:i,onOpenChange:j,modal:k=!0}=a,l=c.useRef(null),m=c.useRef(null),[n=!1,o]=(0,h.useControllableState)({prop:f,defaultProp:i,onChange:j});return(0,b.jsx)(u,{scope:d,triggerRef:l,contentRef:m,contentId:(0,g.useId)(),titleId:(0,g.useId)(),descriptionId:(0,g.useId)(),open:n,onOpenChange:o,onOpenToggle:c.useCallback(()=>o(a=>!a),[o]),modal:k,children:e})};w.displayName=r;var x="DialogTrigger";c.forwardRef((a,c)=>{let{__scopeDialog:f,...g}=a,h=v(x,f),i=(0,e.useComposedRefs)(c,h.triggerRef);return(0,b.jsx)(m.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":h.open,"aria-controls":h.contentId,"data-state":Q(h.open),...g,ref:i,onClick:(0,d.composeEventHandlers)(a.onClick,h.onOpenToggle)})}).displayName=x;var y="DialogPortal",[z,A]=s(y,{forceMount:void 0}),B=a=>{let{__scopeDialog:d,forceMount:e,children:f,container:g}=a,h=v(y,d);return(0,b.jsx)(z,{scope:d,forceMount:e,children:c.Children.map(f,a=>(0,b.jsx)(l.Presence,{present:e||h.open,children:(0,b.jsx)(k.Portal,{asChild:!0,container:g,children:a})}))})};B.displayName=y;var C="DialogOverlay",D=c.forwardRef((a,c)=>{let d=A(C,a.__scopeDialog),{forceMount:e=d.forceMount,...f}=a,g=v(C,a.__scopeDialog);return g.modal?(0,b.jsx)(l.Presence,{present:e||g.open,children:(0,b.jsx)(E,{...f,ref:c})}):null});D.displayName=C;var E=c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=v(C,d);return(0,b.jsx)(o.RemoveScroll,{as:q.Slot,allowPinchZoom:!0,shards:[f.contentRef],children:(0,b.jsx)(m.Primitive.div,{"data-state":Q(f.open),...e,ref:c,style:{pointerEvents:"auto",...e.style}})})}),F="DialogContent",G=c.forwardRef((a,c)=>{let d=A(F,a.__scopeDialog),{forceMount:e=d.forceMount,...f}=a,g=v(F,a.__scopeDialog);return(0,b.jsx)(l.Presence,{present:e||g.open,children:g.modal?(0,b.jsx)(H,{...f,ref:c}):(0,b.jsx)(I,{...f,ref:c})})});G.displayName=F;var H=c.forwardRef((a,f)=>{let g=v(F,a.__scopeDialog),h=c.useRef(null),i=(0,e.useComposedRefs)(f,g.contentRef,h);return c.useEffect(()=>{let a=h.current;if(a)return(0,p.hideOthers)(a)},[]),(0,b.jsx)(J,{...a,ref:i,trapFocus:g.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,d.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),g.triggerRef.current?.focus()}),onPointerDownOutside:(0,d.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:(0,d.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault())})}),I=c.forwardRef((a,d)=>{let e=v(F,a.__scopeDialog),f=c.useRef(!1),g=c.useRef(!1);return(0,b.jsx)(J,{...a,ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(f.current||e.triggerRef.current?.focus(),b.preventDefault()),f.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(f.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let c=b.target;e.triggerRef.current?.contains(c)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),J=c.forwardRef((a,d)=>{let{__scopeDialog:f,trapFocus:g,onOpenAutoFocus:h,onCloseAutoFocus:k,...l}=a,m=v(F,f),o=c.useRef(null),p=(0,e.useComposedRefs)(d,o);return(0,n.useFocusGuards)(),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.FocusScope,{asChild:!0,loop:!0,trapped:g,onMountAutoFocus:h,onUnmountAutoFocus:k,children:(0,b.jsx)(i.DismissableLayer,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":Q(m.open),...l,ref:p,onDismiss:()=>m.onOpenChange(!1)})}),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(U,{titleId:m.titleId}),(0,b.jsx)(V,{contentRef:o,descriptionId:m.descriptionId})]})]})}),K="DialogTitle",L=c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=v(K,d);return(0,b.jsx)(m.Primitive.h2,{id:f.titleId,...e,ref:c})});L.displayName=K;var M="DialogDescription",N=c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=v(M,d);return(0,b.jsx)(m.Primitive.p,{id:f.descriptionId,...e,ref:c})});N.displayName=M;var O="DialogClose",P=c.forwardRef((a,c)=>{let{__scopeDialog:e,...f}=a,g=v(O,e);return(0,b.jsx)(m.Primitive.button,{type:"button",...f,ref:c,onClick:(0,d.composeEventHandlers)(a.onClick,()=>g.onOpenChange(!1))})});function Q(a){return a?"open":"closed"}P.displayName=O;var R="DialogTitleWarning",[S,T]=(0,f.createContext)(R,{contentName:F,titleName:K,docsSlug:"dialog"}),U=({titleId:a})=>{let b=T(R),d=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return c.useEffect(()=>{a&&(document.getElementById(a)||console.error(d))},[d,a]),null},V=({contentRef:a,descriptionId:b})=>{let d=T("DialogDescriptionWarning"),e=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${d.contentName}}.`;return c.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(e))},[e,a,b]),null};let W=(0,a.i(31261).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var X=a.i(13916);let Y=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(D,{ref:d,className:(0,X.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...c}));Y.displayName=D.displayName;let Z=c.forwardRef(({className:a,children:c,...d},e)=>(0,b.jsxs)(B,{children:[(0,b.jsx)(Y,{}),(0,b.jsxs)(G,{ref:e,className:(0,X.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[c,(0,b.jsxs)(P,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,b.jsx)(W,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));Z.displayName=G.displayName;let $=({className:a,...c})=>(0,b.jsx)("div",{className:(0,X.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...c});$.displayName="DialogHeader";let _=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(L,{ref:d,className:(0,X.cn)("text-lg font-semibold leading-none tracking-tight",a),...c}));_.displayName=L.displayName;let aa=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(N,{ref:d,className:(0,X.cn)("text-sm text-muted-foreground",a),...c}));aa.displayName=N.displayName;var ab=a.i(91939),ac=a.i(93846),ad=a.i(44412),ae=a.i(76987),af=a.i(6454);function ag({isOpen:a,onClose:d,service:e}){let[f,g]=(0,c.useState)(1),{mintCredit:h,isPending:i}=(0,ad.useServiceCredit)(),j=e.price*BigInt(f),k=e.maxSupply-e.totalMinted,l=async()=>{if(f>k)return void af.toast.error(`Only ${k} tokens available`);try{await h(e.tokenId,BigInt(f),e.price),af.toast.success(`Successfully purchased ${f} ${e.name} credit(s)!`),d(),g(1)}catch(a){af.toast.error(a.message||"Purchase failed")}};return(0,b.jsx)(w,{open:a,onOpenChange:d,children:(0,b.jsxs)(Z,{className:"sm:max-w-md",children:[(0,b.jsxs)($,{children:[(0,b.jsx)(_,{children:"Purchase Service Credits"}),(0,b.jsx)(aa,{children:e.name})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Price per credit:"}),(0,b.jsxs)("span",{className:"font-bold",children:[(0,ae.formatEther)(e.price)," MNT"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Available:"}),(0,b.jsxs)("span",{className:"font-medium",children:[k," / ",e.maxSupply]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Amount to purchase:"}),(0,b.jsx)(ac.Input,{type:"number",min:"1",max:k,value:f,onChange:a=>g(Math.min(Number(a.target.value),k))})]}),(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Subtotal:"}),(0,b.jsxs)("span",{children:[(0,ae.formatEther)(j)," MNT"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between font-bold text-lg",children:[(0,b.jsx)("span",{children:"Total:"}),(0,b.jsxs)("span",{children:[(0,ae.formatEther)(j)," MNT"]})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(ab.Button,{onClick:l,disabled:i||f<1,className:"flex-1 bg-accent text-accent-foreground hover:bg-accent/90",children:i?"Processing...":`Purchase ${f} Credit${1!==f?"s":""}`}),(0,b.jsx)(ab.Button,{variant:"outline",onClick:d,children:"Cancel"})]})]})})}a.s(["PurchaseModal",()=>ag],41873)},41400,a=>{"use strict";var b=a.i(57850),c=a.i(91786),d=a.i(10713),e=a.i(91939),f=a.i(93846),g=a.i(44412),h=a.i(45056),i=a.i(43293),j=a.i(76987),k=a.i(41873);function l(){let{useNextTokenId:a}=(0,g.useServiceCredit)(),e=a(),j=e.data?Number(e.data)-1:0,[l,n]=(0,h.useState)({}),[o,p]=(0,h.useState)(""),[q,r]=(0,h.useState)("all"),[s,t]=(0,h.useState)("default"),[u,v]=(0,h.useState)(null),[w,x]=(0,h.useState)(!1);(0,h.useEffect)(()=>{n((0,i.getAllServiceMetadata)())},[]);let y=(a,b,c,d,e)=>{v({tokenId:BigInt(a),price:b,name:e||`Service #${a}`,maxSupply:c,totalMinted:d}),x(!0)},z=(0,h.useMemo)(()=>{let a=new Set;return Object.values(l).forEach(b=>{b?.category&&a.add(b.category)}),Array.from(a)},[l]);return(0,b.jsxs)("main",{className:"min-h-screen",children:[(0,b.jsx)(c.Navigation,{}),(0,b.jsx)("section",{className:"pt-32 pb-20 px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-12",children:[(0,b.jsx)("h1",{className:"text-5xl font-bold mb-4 text-balance",children:"Service Marketplace"}),(0,b.jsx)("p",{className:"text-xl text-muted-foreground text-pretty",children:"Browse tokenized services and discover real yield opportunities."})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-12",children:[(0,b.jsx)(f.Input,{placeholder:"Search services or businesses...",className:"flex-1",value:o,onChange:a=>p(a.target.value)}),(0,b.jsxs)("select",{className:"px-4 py-2 border border-input bg-background rounded-md",value:q,onChange:a=>r(a.target.value),children:[(0,b.jsx)("option",{value:"all",children:"All Categories"}),z.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsxs)("select",{className:"px-4 py-2 border border-input bg-background rounded-md",value:s,onChange:a=>t(a.target.value),children:[(0,b.jsx)("option",{value:"default",children:"Default Order"}),(0,b.jsx)("option",{value:"price-low",children:"Price: Low to High"}),(0,b.jsx)("option",{value:"price-high",children:"Price: High to Low"}),(0,b.jsx)("option",{value:"available",children:"Most Available"})]})]}),0===j?(0,b.jsxs)(d.Card,{className:"p-12 text-center border-2 border-dashed",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-2",children:"No services available yet"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Check back later for tokenized services"})]}):(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:j},(a,c)=>{let d=c+1;return(0,b.jsx)(m,{tokenId:d,metadata:l[d],searchQuery:o,categoryFilter:q,onPurchase:y},d)})})]})}),u&&(0,b.jsx)(k.PurchaseModal,{isOpen:w,onClose:()=>x(!1),service:u}),(0,b.jsx)("footer",{className:"border-t border-border py-12 px-4 sm:px-6 lg:px-8",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto text-center text-sm text-muted-foreground",children:"Â© 2025 ServiceFi. Built on Mantle Network."})})]})}function m({tokenId:a,metadata:c,searchQuery:f,categoryFilter:h,onPurchase:i}){let{useServiceInfo:k}=(0,g.useServiceCredit)(),l=k(BigInt(a));if(!l.data)return null;let m=l.data[0],n=l.data[1],o=Number(l.data[2]),p=Number(l.data[3]),q=l.data[4],r=o-p;if(!q||0===r)return null;let s=c?.name||`Service #${a}`,t=c?.brand||"Service Provider",u=f.toLowerCase();if(f&&!s.toLowerCase().includes(u)&&!t.toLowerCase().includes(u)||"all"!==h&&c?.category!==h)return null;let v=Math.floor(Date.now()/1e3),w=Math.floor((Number(n)-v)/86400);return(0,b.jsxs)(d.Card,{className:"overflow-hidden border-2 hover:border-accent transition-colors group",children:[c?.image?(0,b.jsx)("div",{className:"aspect-video bg-muted overflow-hidden",children:(0,b.jsx)("img",{src:c.image,alt:s,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:a=>{a.currentTarget.style.display="none"}})}):(0,b.jsx)("div",{className:"aspect-video bg-muted flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-6xl font-bold text-muted-foreground/20",children:t.charAt(0)})}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground mb-2",children:c?.category||"Service"}),(0,b.jsx)("h3",{className:"text-xl font-bold mb-1",children:t}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:s}),c?.description&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-4 line-clamp-2",children:c.description}),(0,b.jsxs)("div",{className:"space-y-3 mb-6 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Token Price"}),(0,b.jsxs)("span",{className:"font-bold",children:[(0,j.formatEther)(m)," MNT"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Token ID"}),(0,b.jsxs)("span",{className:"font-mono",children:["#",a]})]}),(0,b.jsxs)("div",{className:"pt-3 border-t border-border",children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Available"}),(0,b.jsxs)("span",{className:"font-medium",children:[r," / ",o," tokens"]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Expires in"}),(0,b.jsxs)("span",{className:w<=7?"text-accent font-medium":"",children:[w," days"]})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{onClick:()=>i(a,m,o,p,s),className:"flex-1 bg-accent text-accent-foreground hover:bg-accent/90",disabled:0===r,children:0===r?"Sold Out":"Purchase"}),(0,b.jsx)(e.Button,{variant:"outline",className:"flex-1 bg-transparent",children:"Details"})]})]})]})}a.s(["default",()=>l])},22754,a=>{a.v(b=>Promise.all(["server/chunks/ssr/9e883_viem__esm_utils_d8f2ca15._.js"].map(b=>a.l(b))).then(()=>b(47440)))},66670,a=>{a.v(b=>Promise.all(["server/chunks/ssr/9e883_@noble_curves_esm_secp256k1_8284fba1.js"].map(b=>a.l(b))).then(()=>b(38808)))}];

//# sourceMappingURL=frontend_0575b3aa._.js.map