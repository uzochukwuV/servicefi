module.exports=[29607,a=>{"use strict";var b=a.i(57850),c=a.i(91786),d=a.i(10713),e=a.i(21130),f=a.i(40320),g=a.i(44412),h=a.i(2884),i=a.i(94606),j=a.i(45056);function k(){let{address:a}=(0,f.useAccount)(),c=(0,i.useChainId)(),e=(0,h.getContractAddress)(5003===c?"mantleSepoliaTestnet":"mantleMainnet","serviceCreditToken"),{useNextTokenId:k,useServiceInfo:l}=(0,g.useServiceCredit)(),m=k(),n=m.data?Number(m.data)-1:0,[o,p]=(0,j.useState)({totalTokens:0,totalValue:0,expiringSoon:0});return((0,j.useEffect)(()=>{a&&0!==n&&(async()=>{Date.now();for(let a=1;a<=n;a++)try{BigInt(a)}catch(b){console.error(`Error fetching stats for token ${a}:`,b)}p({totalTokens:0,totalValue:0,expiringSoon:0})})()},[a,n,e]),a)?(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,b.jsxs)(d.Card,{className:"p-6",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"My Tokens"}),(0,b.jsx)("div",{className:"text-3xl font-bold",children:o.totalTokens}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Service credits owned"})]}),(0,b.jsxs)(d.Card,{className:"p-6",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Value"}),(0,b.jsxs)("div",{className:"text-3xl font-bold",children:[o.totalValue.toFixed(2)," MNT"]}),(0,b.jsx)("div",{className:"text-xs text-accent mt-1",children:"In your wallet"})]}),(0,b.jsxs)(d.Card,{className:"p-6",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Redeemed"}),(0,b.jsx)("div",{className:"text-3xl font-bold",children:"--"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"All time"})]}),(0,b.jsxs)(d.Card,{className:"p-6",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Expiring Soon"}),(0,b.jsx)("div",{className:"text-3xl font-bold",children:o.expiringSoon}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Within 7 days"})]})]}):(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,b.jsxs)(d.Card,{className:"p-6",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"My Tokens"}),(0,b.jsx)("div",{className:"text-3xl font-bold",children:"--"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Connect wallet"})]}),(0,b.jsxs)(d.Card,{className:"p-6",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Value"}),(0,b.jsx)("div",{className:"text-3xl font-bold",children:"--"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Connect wallet"})]}),(0,b.jsxs)(d.Card,{className:"p-6",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Redeemed"}),(0,b.jsx)("div",{className:"text-3xl font-bold",children:"--"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Connect wallet"})]}),(0,b.jsxs)(d.Card,{className:"p-6",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Expiring Soon"}),(0,b.jsx)("div",{className:"text-3xl font-bold",children:"--"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Connect wallet"})]})]})}var l=a.i(91939),m=a.i(76987),n=a.i(43293),o=a.i(41873);function p(){let{useServiceInfo:a,useNextTokenId:c}=(0,g.useServiceCredit)(),e=c(),[f,h]=(0,j.useState)({}),[i,k]=(0,j.useState)(null),[l,m]=(0,j.useState)(!1),p=e.data?Number(e.data)-1:0;(0,j.useEffect)(()=>{h((0,n.getAllServiceMetadata)())},[]);let r=(a,b,c,d,e)=>{k({tokenId:BigInt(a),price:b,name:e||`Service #${a}`,maxSupply:c,totalMinted:d}),m(!0)};return 0===p?(0,b.jsxs)(d.Card,{className:"p-8 text-center border-2 border-dashed",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-2",children:"No services available yet"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Check back later for available services"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:p},(a,c)=>{let d=c+1;return(0,b.jsx)(q,{tokenId:d,metadata:f[d],onPurchase:r},d)})}),i&&(0,b.jsx)(o.PurchaseModal,{isOpen:l,onClose:()=>m(!1),service:i})]})}function q({tokenId:a,metadata:c,onPurchase:e}){let{useServiceInfo:f}=(0,g.useServiceCredit)(),h=f(BigInt(a));if(!h.data)return(0,b.jsxs)(d.Card,{className:"border-2 animate-pulse",children:[(0,b.jsx)("div",{className:"aspect-video bg-muted"}),(0,b.jsxs)("div",{className:"p-6 space-y-3",children:[(0,b.jsx)("div",{className:"h-4 bg-muted rounded w-3/4"}),(0,b.jsx)("div",{className:"h-3 bg-muted rounded w-1/2"})]})]});let i=h.data[0],j=Number(h.data[2]),k=Number(h.data[3]),n=h.data[4],o=j-k;return n?(0,b.jsxs)(d.Card,{className:"border-2 hover:border-accent transition-colors",children:[c?.image&&(0,b.jsx)("div",{className:"aspect-video bg-muted overflow-hidden",children:(0,b.jsx)("img",{src:c.image,alt:c.name||`Service #${a}`,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.style.display="none"}})}),!c?.image&&(0,b.jsx)("div",{className:"aspect-video bg-muted flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-6xl font-bold text-muted-foreground/20",children:c?.brand?.[0]||"#"})}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h3",{className:"font-bold text-lg mb-1",children:c?.brand||"Service Provider"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm mb-4",children:c?.name||`Service #${a}`}),c?.description&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-4 line-clamp-2",children:c.description}),(0,b.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,b.jsx)("div",{className:"flex items-baseline gap-2",children:(0,b.jsxs)("span",{className:"text-2xl font-bold text-accent",children:[(0,m.formatEther)(i)," MNT"]})}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[o," available â€¢ ",k," already sold"]})]}),(0,b.jsx)(l.Button,{onClick:()=>e(a,i,j,k,c?.name||`Service #${a}`),disabled:0===o,className:"w-full bg-accent text-accent-foreground hover:bg-accent/90",children:0===o?"Sold Out":"Purchase Token"})]})]}):null}var r=a.i(54700),s=a.i(74001);function t(){let{address:a}=(0,f.useAccount)(),c=(0,i.useChainId)(),e=(0,h.getContractAddress)(5003===c?"mantleSepoliaTestnet":"mantleMainnet","serviceCreditToken"),{useNextTokenId:k,useServiceInfo:l}=(0,g.useServiceCredit)(),m=k(),n=m.data?Number(m.data)-1:0,[o,p]=(0,j.useState)([]);return((0,j.useEffect)(()=>{a&&0!==n&&(async()=>{let a=[];for(let b=1;b<=n;b++)a.push(b);p(a)})()},[a,n]),a)?0===n?(0,b.jsxs)(d.Card,{className:"p-8 text-center border-2 border-dashed",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-2",children:"No services available"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Browse services to purchase tokens"})]}):(0,b.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:o.map(c=>(0,b.jsx)(u,{tokenId:c,userAddress:a,contractAddress:e},c))}):(0,b.jsx)(d.Card,{className:"p-8 text-center border-2",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Connect your wallet to view your tokens"})})}function u({tokenId:a,userAddress:c,contractAddress:e}){let{useServiceInfo:f}=(0,g.useServiceCredit)(),[h,i]=(0,j.useState)(null),k=f(BigInt(a)),o=(0,r.useReadContract)({address:e,abi:s.ServiceCreditTokenABI,functionName:"balanceOf",args:[c,BigInt(a)]});(0,j.useEffect)(()=>{i((0,n.getServiceMetadata)(a))},[a]);let p=o.data?Number(o.data):0;if(0===p||!k.data)return null;let q=k.data[0],t=k.data[1];k.data[4];let u=Math.floor(Date.now()/1e3),v=Math.floor((Number(t)-u)/86400),w=v<=7&&v>0,x=v<=0;return(0,b.jsxs)(d.Card,{className:`p-6 border-2 ${w?"border-accent":x?"border-destructive":""}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-lg mb-1",children:h?.brand||"Service Provider"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:h?.name||`Service #${a}`})]}),(0,b.jsx)("div",{className:`text-xs px-2 py-1 ${w?"bg-accent/10 text-accent":x?"bg-destructive/10 text-destructive":"bg-muted text-muted-foreground"}`,children:x?"Expired":w?"Expiring Soon":"Active"})]}),(0,b.jsxs)("div",{className:"space-y-2 mb-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Token ID"}),(0,b.jsxs)("span",{className:"font-mono",children:["#",a]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Balance"}),(0,b.jsxs)("span",{className:"font-bold",children:[p," token",1!==p?"s":""]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Value per token"}),(0,b.jsxs)("span",{className:"font-bold",children:[(0,m.formatEther)(q)," MNT"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Total Value"}),(0,b.jsxs)("span",{className:"font-bold text-accent",children:[(0,m.formatEther)(q*BigInt(p))," MNT"]})]}),(0,b.jsxs)("div",{className:"flex justify-between pt-2 border-t border-border",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Expires in"}),(0,b.jsx)("span",{className:w?"text-accent font-bold":x?"text-destructive":"",children:x?"Expired":`${v} day${1!==v?"s":""}`})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(l.Button,{className:"flex-1 bg-accent text-accent-foreground hover:bg-accent/90",disabled:x,children:"Redeem Now"}),(0,b.jsx)(l.Button,{variant:"outline",className:"flex-1 bg-transparent",children:"Transfer"})]})]})}var v=a.i(1397),w=a.i(74628),x=a.i(7501),y=a.i(63243),z=a.i(16358),A=a.i(28923),B=a.i(73048),C=a.i(6897);function D(a){if(!(a instanceof B.BaseError))return!1;let b=a.walk(a=>a instanceof C.ContractFunctionRevertedError);return b instanceof C.ContractFunctionRevertedError&&(b.data?.errorName==="HttpError"||b.data?.errorName==="ResolverError"||b.data?.errorName==="ResolverNotContract"||b.data?.errorName==="ResolverNotFound"||b.data?.errorName==="ReverseAddressMismatch"||b.data?.errorName==="UnsupportedResolverProfile")}var E=a.i(63355),F=a.i(55257),G=a.i(68626),H=a.i(78697),I=a.i(3262);function J(a){if(66!==a.length||0!==a.indexOf("[")||65!==a.indexOf("]"))return null;let b=`0x${a.slice(1,65)}`;return(0,I.isHex)(b)?b:null}function K(a){let b=new Uint8Array(32).fill(0);if(!a)return(0,A.bytesToHex)(b);let c=a.split(".");for(let a=c.length-1;a>=0;a-=1){let d=J(c[a]),e=d?(0,G.toBytes)(d):(0,H.keccak256)((0,G.stringToBytes)(c[a]),"bytes");b=(0,H.keccak256)((0,F.concat)([b,e]),"bytes")}return(0,A.bytesToHex)(b)}function L(a){let b=a.replace(/^\.|\.$/gm,"");if(0===b.length)return new Uint8Array(1);let c=new Uint8Array((0,G.stringToBytes)(b).byteLength+2),d=0,e=b.split(".");for(let a=0;a<e.length;a++){var f;let b=(0,G.stringToBytes)(e[a]);b.byteLength>255&&(b=(0,G.stringToBytes)((f=function(a){let b=new Uint8Array(32).fill(0);return a?J(a)||(0,H.keccak256)((0,G.stringToBytes)(a)):(0,A.bytesToHex)(b)}(e[a]),`[${f.slice(2)}]`))),c[d]=b.length,c.set(b,d+1),d+=b.length+1}return c.byteLength!==d+1?c.slice(0,d+1):c}var M=a.i(7514),N=a.i(5200);async function O(a,b){let{blockNumber:c,blockTag:d,coinType:e,name:f,gatewayUrls:g,strict:h}=b,{chain:i}=a,j=(()=>{if(b.universalResolverAddress)return b.universalResolverAddress;if(!i)throw Error("client chain not configured. universalResolverAddress is required.");return(0,y.getChainContractAddress)({blockNumber:c,chain:i,contract:"ensUniversalResolver"})})(),k=i?.ensTlds;if(k&&!k.some(a=>f.endsWith(a)))return null;let l=null!=e?[K(f),BigInt(e)]:[K(f)];try{let b=(0,x.encodeFunctionData)({abi:v.addressResolverAbi,functionName:"addr",args:l}),e={address:j,abi:v.universalResolverResolveAbi,functionName:"resolveWithGateways",args:[(0,A.toHex)(L(f)),b,g??[E.localBatchGatewayUrl]],blockNumber:c,blockTag:d},h=(0,M.getAction)(a,N.readContract,"readContract"),i=await h(e);if("0x"===i[0])return null;let k=(0,w.decodeFunctionResult)({abi:v.addressResolverAbi,args:l,functionName:"addr",data:i[0]});if("0x"===k||"0x00"===(0,z.trim)(k))return null;return k}catch(a){if(h)throw a;if(D(a))return null;throw a}}var P=B;class Q extends P.BaseError{constructor({data:a}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(a)}`],name:"EnsAvatarInvalidMetadataError"})}}class R extends P.BaseError{constructor({reason:a}){super(`ENS NFT avatar URI is invalid. ${a}`,{name:"EnsAvatarInvalidNftUriError"})}}class S extends P.BaseError{constructor({uri:a}){super(`Unable to resolve ENS avatar URI "${a}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class T extends P.BaseError{constructor({namespace:a}){super(`ENS NFT avatar namespace "${a}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}P.BaseError;let U=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,V=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,W=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,X=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Y(a){try{let b=await fetch(a,{method:"HEAD"});if(200===b.status){let a=b.headers.get("content-type");return a?.startsWith("image/")}return!1}catch(b){if("object"==typeof b&&void 0!==b.response||!Object.hasOwn(globalThis,"Image"))return!1;return new Promise(b=>{let c=new Image;c.onload=()=>{b(!0)},c.onerror=()=>{b(!1)},c.src=a})}}function Z(a,b){return a?a.endsWith("/")?a.slice(0,-1):a:b}function $({uri:a,gatewayUrls:b}){let c=W.test(a);if(c)return{uri:a,isOnChain:!0,isEncoded:c};let d=Z(b?.ipfs,"https://ipfs.io"),e=Z(b?.arweave,"https://arweave.net"),f=a.match(U),{protocol:g,subpath:h,target:i,subtarget:j=""}=f?.groups||{},k="ipns:/"===g||"ipns/"===h,l="ipfs:/"===g||"ipfs/"===h||V.test(a);if(a.startsWith("http")&&!k&&!l){let c=a;return b?.arweave&&(c=a.replace(/https:\/\/arweave.net/g,b?.arweave)),{uri:c,isOnChain:!1,isEncoded:!1}}if((k||l)&&i)return{uri:`${d}/${k?"ipns":"ipfs"}/${i}${j}`,isOnChain:!1,isEncoded:!1};if("ar:/"===g&&i)return{uri:`${e}/${i}${j||""}`,isOnChain:!1,isEncoded:!1};let m=a.replace(X,"");if(m.startsWith("<svg")&&(m=`data:image/svg+xml;base64,${btoa(m)}`),m.startsWith("data:")||m.startsWith("{"))return{uri:m,isOnChain:!0,isEncoded:!1};throw new S({uri:a})}function _(a){if("object"!=typeof a||!("image"in a)&&!("image_url"in a)&&!("image_data"in a))throw new Q({data:a});return a.image||a.image_url||a.image_data}async function aa({gatewayUrls:a,uri:b}){try{let c=await fetch(b).then(a=>a.json());return await ab({gatewayUrls:a,uri:_(c)})}catch{throw new S({uri:b})}}async function ab({gatewayUrls:a,uri:b}){let{uri:c,isOnChain:d}=$({uri:b,gatewayUrls:a});if(d||await Y(c))return c;throw new S({uri:b})}async function ac(a,{nft:b}){if("erc721"===b.namespace)return(0,N.readContract)(a,{address:b.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(b.tokenID)]});if("erc1155"===b.namespace)return(0,N.readContract)(a,{address:b.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(b.tokenID)]});throw new T({namespace:b.namespace})}async function ad(a,{gatewayUrls:b,record:c}){return/eip155:/i.test(c)?ae(a,{gatewayUrls:b,record:c}):ab({uri:c,gatewayUrls:b})}async function ae(a,{gatewayUrls:b,record:c}){let d=function(a){let b=a;b.startsWith("did:nft:")&&(b=b.replace("did:nft:","").replace(/_/g,"/"));let[c,d,e]=b.split("/"),[f,g]=c.split(":"),[h,i]=d.split(":");if(!f||"eip155"!==f.toLowerCase())throw new R({reason:"Only EIP-155 supported"});if(!g)throw new R({reason:"Chain ID not found"});if(!i)throw new R({reason:"Contract address not found"});if(!e)throw new R({reason:"Token ID not found"});if(!h)throw new R({reason:"ERC namespace not found"});return{chainID:Number.parseInt(g,10),namespace:h.toLowerCase(),contractAddress:i,tokenID:e}}(c),{uri:e,isOnChain:f,isEncoded:g}=$({uri:await ac(a,{nft:d}),gatewayUrls:b});if(f&&(e.includes("data:application/json;base64,")||e.startsWith("{")))return ab({uri:_(JSON.parse(g?atob(e.replace("data:application/json;base64,","")):e)),gatewayUrls:b});let h=d.tokenID;return"erc1155"===d.namespace&&(h=h.replace("0x","").padStart(64,"0")),aa({gatewayUrls:b,uri:e.replace(/(?:0x)?{id}/,h)})}async function af(a,b){let{blockNumber:c,blockTag:d,key:e,name:f,gatewayUrls:g,strict:h}=b,{chain:i}=a,j=(()=>{if(b.universalResolverAddress)return b.universalResolverAddress;if(!i)throw Error("client chain not configured. universalResolverAddress is required.");return(0,y.getChainContractAddress)({blockNumber:c,chain:i,contract:"ensUniversalResolver"})})(),k=i?.ensTlds;if(k&&!k.some(a=>f.endsWith(a)))return null;try{let b={address:j,abi:v.universalResolverResolveAbi,args:[(0,A.toHex)(L(f)),(0,x.encodeFunctionData)({abi:v.textResolverAbi,functionName:"text",args:[K(f),e]}),g??[E.localBatchGatewayUrl]],functionName:"resolveWithGateways",blockNumber:c,blockTag:d},h=(0,M.getAction)(a,N.readContract,"readContract"),i=await h(b);if("0x"===i[0])return null;let k=(0,w.decodeFunctionResult)({abi:v.textResolverAbi,functionName:"text",data:i[0]});return""===k?null:k}catch(a){if(h)throw a;if(D(a))return null;throw a}}async function ag(a,{blockNumber:b,blockTag:c,assetGatewayUrls:d,name:e,gatewayUrls:f,strict:g,universalResolverAddress:h}){let i=await (0,M.getAction)(a,af,"getEnsText")({blockNumber:b,blockTag:c,key:"avatar",name:e,universalResolverAddress:h,gatewayUrls:f,strict:g});if(!i)return null;try{return await ad(a,{record:i,gatewayUrls:d})}catch{return null}}async function ah(a,b){let{address:c,blockNumber:d,blockTag:e,coinType:f=60n,gatewayUrls:g,strict:h}=b,{chain:i}=a,j=(()=>{if(b.universalResolverAddress)return b.universalResolverAddress;if(!i)throw Error("client chain not configured. universalResolverAddress is required.");return(0,y.getChainContractAddress)({blockNumber:d,chain:i,contract:"ensUniversalResolver"})})();try{let b={address:j,abi:v.universalResolverReverseAbi,args:[c,f,g??[E.localBatchGatewayUrl]],functionName:"reverseWithGateways",blockNumber:d,blockTag:e},h=(0,M.getAction)(a,N.readContract,"readContract"),[i]=await h(b);return i||null}catch(a){if(h)throw a;if(D(a))return null;throw a}}async function ai(a,b){let{blockNumber:c,blockTag:d,name:e}=b,{chain:f}=a,g=(()=>{if(b.universalResolverAddress)return b.universalResolverAddress;if(!f)throw Error("client chain not configured. universalResolverAddress is required.");return(0,y.getChainContractAddress)({blockNumber:c,chain:f,contract:"ensUniversalResolver"})})(),h=f?.ensTlds;if(h&&!h.some(a=>e.endsWith(a)))throw Error(`${e} is not a valid ENS TLD (${h?.join(", ")}) for chain "${f.name}" (id: ${f.id}).`);let[i]=await (0,M.getAction)(a,N.readContract,"readContract")({address:g,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,A.toHex)(L(e))],blockNumber:c,blockTag:d});return i}var aj=a.i(69442),ak=a.i(78043),al=a.i(56110),am=a.i(8641),an=a.i(73008),ao=a.i(23487);async function ap(a,b){let{account:c=a.account,blockNumber:d,blockTag:e="latest",blobs:f,data:g,gas:h,gasPrice:i,maxFeePerBlobGas:j,maxFeePerGas:k,maxPriorityFeePerGas:l,to:m,value:n,...o}=b,p=c?(0,ak.parseAccount)(c):void 0;try{(0,ao.assertRequest)(b);let c="bigint"==typeof d?(0,A.numberToHex)(d):void 0,q=a.chain?.formatters?.transactionRequest?.format,r=(q||an.formatTransactionRequest)({...(0,am.extract)(o,{format:q}),account:p,blobs:f,data:g,gas:h,gasPrice:i,maxFeePerBlobGas:j,maxFeePerGas:k,maxPriorityFeePerGas:l,to:m,value:n},"createAccessList"),s=await a.request({method:"eth_createAccessList",params:[r,c||e]});return{accessList:s.accessList,gasUsed:BigInt(s.gasUsed)}}catch(c){throw(0,al.getCallError)(c,{...b,account:p,chain:a.chain})}}var aq=a.i(31356);async function ar(a){let b=(0,aq.createFilterRequestScope)(a,{method:"eth_newBlockFilter"}),c=await a.request({method:"eth_newBlockFilter"});return{id:c,request:b(c),type:"block"}}var as=a.i(1132),at=a.i(47548);async function au(a,{address:b,args:c,event:d,events:e,fromBlock:f,strict:g,toBlock:h}={}){let i=e??(d?[d]:void 0),j=(0,aq.createFilterRequestScope)(a,{method:"eth_newFilter"}),k=[];i&&(k=[i.flatMap(a=>(0,at.encodeEventTopics)({abi:[a],eventName:a.name,args:c}))],d&&(k=k[0]));let l=await a.request({method:"eth_newFilter",params:[{address:b,fromBlock:"bigint"==typeof f?(0,A.numberToHex)(f):f,toBlock:"bigint"==typeof h?(0,A.numberToHex)(h):h,...k.length?{topics:k}:{}}]});return{abi:i,args:c,eventName:d?d.name:void 0,fromBlock:f,id:l,request:j(l),strict:!!g,toBlock:h,type:"event"}}async function av(a){let b=(0,aq.createFilterRequestScope)(a,{method:"eth_newPendingTransactionFilter"}),c=await a.request({method:"eth_newPendingTransactionFilter"});return{id:c,request:b(c),type:"transaction"}}var aw=a.i(8262),ax=a.i(63576);async function ay(a,b){let{abi:c,address:d,args:e,functionName:f,dataSuffix:g,...h}=b,i=(0,x.encodeFunctionData)({abi:c,args:e,functionName:f});try{return await (0,M.getAction)(a,ax.estimateGas,"estimateGas")({data:`${i}${g?g.replace("0x",""):""}`,to:d,...h})}catch(b){let a=h.account?(0,ak.parseAccount)(h.account):void 0;throw(0,aw.getContractError)(b,{abi:c,address:d,args:e,docsPath:"/docs/contract/estimateContractGas",functionName:f,sender:a?.address})}}var az=a.i(8257),aA=a.i(29167),aB=a.i(24848),aC=a.i(28233);async function aD(a){return BigInt(await a.request({method:"eth_blobBaseFee"}))}var aE=a.i(58475),aF=a.i(41550),aG=a.i(11194);async function aH(a,{blockHash:b,blockNumber:c,blockTag:d="latest"}={}){let e,f=void 0!==c?(0,A.numberToHex)(c):void 0;return e=b?await a.request({method:"eth_getBlockTransactionCountByHash",params:[b]},{dedupe:!0}):await a.request({method:"eth_getBlockTransactionCountByNumber",params:[f||d]},{dedupe:!!f}),(0,aG.hexToNumber)(e)}var aI=a.i(39403);async function aJ(a,{address:b,blockNumber:c,blockTag:d="latest"}){let e=void 0!==c?(0,A.numberToHex)(c):void 0,f=await a.request({method:"eth_getCode",params:[b,e||d]},{dedupe:!!e});if("0x"!==f)return f}var aK=a.i(63861),aL=B;class aM extends aL.BaseError{constructor({address:a}){super(`No EIP-712 domain found on contract "${a}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${a}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function aN(a,b){let{address:c,factory:d,factoryData:e}=b;try{let[b,f,g,h,i,j,k]=await (0,M.getAction)(a,N.readContract,"readContract")({abi:aO,address:c,functionName:"eip712Domain",factory:d,factoryData:e});return{domain:{name:f,version:g,chainId:Number(h),verifyingContract:i,salt:j},extensions:k,fields:b}}catch(a){if("ContractFunctionExecutionError"===a.name&&"ContractFunctionZeroDataError"===a.cause.name)throw new aM({address:c});throw a}}let aO=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];async function aP(a,{blockCount:b,blockNumber:c,blockTag:d="latest",rewardPercentiles:e}){var f;let g="bigint"==typeof c?(0,A.numberToHex)(c):void 0;return{baseFeePerGas:(f=await a.request({method:"eth_feeHistory",params:[(0,A.numberToHex)(b),g||d,e]},{dedupe:!!g})).baseFeePerGas.map(a=>BigInt(a)),gasUsedRatio:f.gasUsedRatio,oldestBlock:BigInt(f.oldestBlock),reward:f.reward?.map(a=>a.map(a=>BigInt(a)))}}var aQ=a.i(40476),aR=a.i(12602),aS=a.i(45285);async function aT(a,{filter:b}){let c=b.strict??!1,d=(await b.request({method:"eth_getFilterLogs",params:[b.id]})).map(a=>(0,aS.formatLog)(a));return b.abi?(0,aR.parseEventLogs)({abi:b.abi,logs:d,strict:c}):d}var aU=a.i(91760),aV=a.i(6006);async function aW(a,{address:b,blockNumber:c,blockTag:d,storageKeys:e}){let f=void 0!==c?(0,A.numberToHex)(c):void 0;var g=await a.request({method:"eth_getProof",params:[b,e,f||(d??"latest")]});return{...g,balance:g.balance?BigInt(g.balance):void 0,nonce:g.nonce?(0,aG.hexToNumber)(g.nonce):void 0,storageProof:g.storageProof?g.storageProof.map(a=>({...a,value:BigInt(a.value)})):void 0}}async function aX(a,{address:b,blockNumber:c,blockTag:d="latest",slot:e}){let f=void 0!==c?(0,A.numberToHex)(c):void 0;return await a.request({method:"eth_getStorageAt",params:[b,e,f||d]})}var aY=a.i(61184);async function aZ(a,{hash:b,transactionReceipt:c}){let[d,e]=await Promise.all([(0,M.getAction)(a,aF.getBlockNumber,"getBlockNumber")({}),b?(0,M.getAction)(a,aY.getTransaction,"getTransaction")({hash:b}):void 0]),f=c?.blockNumber||e?.blockNumber;return f?d-f+1n:0n}var a$=a.i(28784),a_=a.i(90997),a0=a.i(59617),a1=a.i(83714);async function a2(a,b){let{account:c,authorizationList:d,allowFailure:e=!0,blockNumber:f,blockOverrides:g,blockTag:h,stateOverride:i}=b,j=b.contracts,{batchSize:k=b.batchSize??1024,deployless:l=b.deployless??!1}="object"==typeof a.batch?.multicall?a.batch.multicall:{},m=(()=>{if(b.multicallAddress)return b.multicallAddress;if(l)return null;if(a.chain)return(0,y.getChainContractAddress)({blockNumber:f,chain:a.chain,contract:"multicall3"});throw Error("client chain not configured. multicallAddress is required.")})(),n=[[]],o=0,p=0;for(let a=0;a<j.length;a++){let{abi:b,address:d,args:f,functionName:g}=j[a];try{let a=(0,x.encodeFunctionData)({abi:b,args:f,functionName:g});p+=(a.length-2)/2,k>0&&p>k&&n[o].length>0&&(o++,p=(a.length-2)/2,n[o]=[]),n[o]=[...n[o],{allowFailure:!0,callData:a,target:d}]}catch(h){let a=(0,aw.getContractError)(h,{abi:b,address:d,args:f,docsPath:"/docs/contract/multicall",functionName:g,sender:c});if(!e)throw a;n[o]=[...n[o],{allowFailure:!0,callData:"0x",target:d}]}}let q=await Promise.allSettled(n.map(b=>(0,M.getAction)(a,N.readContract,"readContract")({...null===m?{code:a0.multicall3Bytecode}:{address:m},abi:v.multicall3Abi,account:c,args:[b],authorizationList:d,blockNumber:f,blockOverrides:g,blockTag:h,functionName:"aggregate3",stateOverride:i}))),r=[];for(let a=0;a<q.length;a++){let b=q[a];if("rejected"===b.status){if(!e)throw b.reason;for(let c=0;c<n[a].length;c++)r.push({status:"failure",error:b.reason,result:void 0});continue}let c=b.value;for(let b=0;b<c.length;b++){let{returnData:d,success:f}=c[b],{callData:g}=n[a][b],{abi:h,address:i,functionName:k,args:l}=j[r.length];try{if("0x"===g)throw new a1.AbiDecodingZeroDataError;if(!f)throw new C.RawContractError({data:d});let a=(0,w.decodeFunctionResult)({abi:h,args:l,data:d,functionName:k});r.push(e?{result:a,status:"success"}:a)}catch(b){let a=(0,aw.getContractError)(b,{abi:h,address:i,args:l,docsPath:"/docs/contract/multicall",functionName:k});if(!e)throw a;r.push({error:a,result:void 0,status:"failure"})}}}if(r.length!==j.length)throw new B.BaseError("multicall results mismatch");return r}var a3=a.i(8672),a4=a.i(18781),a5=a.i(4147),a6=a.i(50478),a7=a.i(82185);async function a8(a,b){let{blockNumber:c,blockTag:d=a.experimental_blockTag??"latest",blocks:e,returnFullTransactions:f,traceTransfers:g,validation:h}=b;try{let b=[];for(let a of e){let c=a.blockOverrides?a3.toRpc(a.blockOverrides):void 0,d=a.calls.map(a=>{let b=a.account?(0,ak.parseAccount)(a.account):void 0,c=a.abi?(0,x.encodeFunctionData)(a):a.data,d={...a,account:b,data:a.dataSuffix?(0,F.concat)([c||"0x",a.dataSuffix]):c,from:a.from??b?.address};return(0,ao.assertRequest)(d),(0,an.formatTransactionRequest)(d)}),e=a.stateOverrides?(0,a7.serializeStateOverride)(a.stateOverrides):void 0;b.push({blockOverrides:c,calls:d,stateOverrides:e})}let i="bigint"==typeof c?(0,A.numberToHex)(c):void 0;return(await a.request({method:"eth_simulateV1",params:[{blockStateCalls:b,returnFullTransactions:f,traceTransfers:g,validation:h},i||d]})).map((a,b)=>({...(0,a6.formatBlock)(a),calls:a.calls.map((a,c)=>{let{abi:d,args:f,functionName:g,to:h}=e[b].calls[c],i=a.error?.data??a.returnData,j=BigInt(a.gasUsed),k=a.logs?.map(a=>(0,aS.formatLog)(a)),l="0x1"===a.status?"success":"failure",m=d&&"success"===l&&"0x"!==i?(0,w.decodeFunctionResult)({abi:d,data:i,functionName:g}):null,n=(()=>{let b;if("success"!==l&&(a.error?.data==="0x"?b=new a1.AbiDecodingZeroDataError:a.error&&(b=new C.RawContractError(a.error)),b))return(0,aw.getContractError)(b,{abi:d??[],address:h??"0x",args:f,functionName:g??"<unknown>"})})();return{data:i,gasUsed:j,logs:k,status:l,..."success"===l?{result:m}:{error:n}}})}))}catch(b){let a=(0,a5.getNodeError)(b,{});if(a instanceof a4.UnknownNodeError)throw b;throw a}}var a9=a.i(46505),ba=a.i(56326),bb=a.i(93435),bc=a.i(37977),bd=a.i(94842),be=a.i(10971),bf=a.i(10006),bg=a.i(76377);let bh=Uint32Array.from([0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0]),bi=new Uint32Array(80);bf.HashMD;(a,b)=>Math.floor(0x100000000*Math.abs(Math.sin(b+1)));bf.HashMD;let bj=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),bk=Uint8Array.from(Array(16).fill(0).map((a,b)=>b)),bl=bk.map(a=>(9*a+5)%16),bm=(()=>{let a=[[bk],[bl]];for(let b=0;b<4;b++)for(let c of a)c.push(c[b].map(a=>bj[a]));return a})(),bn=bm[0],bo=bm[1],bp=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(a=>Uint8Array.from(a)),bq=bn.map((a,b)=>a.map(a=>bp[b][a])),br=bo.map((a,b)=>a.map(a=>bp[b][a])),bs=Uint32Array.from([0,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e]),bt=Uint32Array.from([0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0]);bf.HashMD;var bu=a.i(87027);a.i(91768);var bv=a.i(75298),bw=a.i(37294);function bx(a,b={}){let{as:c="string"==typeof a?"Hex":"Bytes"}=b,d=(0,bu.keccak_256)(bv.from(a));return"Bytes"===c?d:bw.fromBytes(d)}class by extends Map{constructor(a){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=a}get(a){let b=super.get(a);return super.has(a)&&void 0!==b&&(this.delete(a),super.set(a,b)),b}set(a,b){if(super.set(a,b),this.maxSize&&this.size>this.maxSize){let a=this.keys().next().value;a&&this.delete(a)}return this}}let bz={checksum:new by(8192)}.checksum;var bA=be,bB=be,bC=a.i(45617);function bD(a,b={}){let{compressed:c}=b,{prefix:d,x:e,y:f}=a;if(!1===c||"bigint"==typeof e&&"bigint"==typeof f){if(4!==d)throw new bG({prefix:d,cause:new bI});return}if(!0===c||"bigint"==typeof e&&void 0===f){if(3!==d&&2!==d)throw new bG({prefix:d,cause:new bH});return}throw new bF({publicKey:a})}function bE(a){if(132!==a.length&&130!==a.length&&68!==a.length)throw new bJ({publicKey:a});if(130===a.length)return{prefix:4,x:BigInt(bw.slice(a,0,32)),y:BigInt(bw.slice(a,32,64))};if(132===a.length){let b=Number(bw.slice(a,0,1));return{prefix:b,x:BigInt(bw.slice(a,1,33)),y:BigInt(bw.slice(a,33,65))}}return{prefix:Number(bw.slice(a,0,1)),x:BigInt(bw.slice(a,1,33))}}class bF extends bB.BaseError{constructor({publicKey:a}){super(`Value \`${bC.stringify(a)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class bG extends bB.BaseError{constructor({prefix:a,cause:b}){super(`Prefix "${a}" is invalid.`,{cause:b}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class bH extends bB.BaseError{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class bI extends bB.BaseError{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class bJ extends bB.BaseError{constructor({publicKey:a}){super(`Value \`${a}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${bw.size(bw.from(a))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}let bK=/^0x[a-fA-F0-9]{40}$/;function bL(a,b={}){let{strict:c=!0}=b;if(!bK.test(a))throw new bO({address:a,cause:new bP});if(c){if(a.toLowerCase()===a)return;if(bM(a)!==a)throw new bO({address:a,cause:new bQ})}}function bM(a){if(bz.has(a))return bz.get(a);bL(a,{strict:!1});let b=a.substring(2).toLowerCase(),c=bx(bv.fromString(b),{as:"Bytes"}),d=b.split("");for(let a=0;a<40;a+=2)c[a>>1]>>4>=8&&d[a]&&(d[a]=d[a].toUpperCase()),(15&c[a>>1])>=8&&d[a+1]&&(d[a+1]=d[a+1].toUpperCase());let e=`0x${d.join("")}`;return bz.set(a,e),e}function bN(a,b={}){let{strict:c=!0}=b??{};try{return bL(a,{strict:c}),!0}catch{return!1}}class bO extends bA.BaseError{constructor({address:a,cause:b}){super(`Address "${a}" is invalid.`,{cause:b}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class bP extends bA.BaseError{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class bQ extends bA.BaseError{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function bR(a){let b=!0,c="",d=0,e="",f=!1;for(let g=0;g<a.length;g++){let h=a[g];if(["(",")",","].includes(h)&&(b=!0),"("===h&&d++,")"===h&&d--,b){if(0===d){if(" "===h&&["event","function","error",""].includes(e))e="";else if(e+=h,")"===h){f=!0;break}continue}if(" "===h){","!==a[g-1]&&","!==c&&",("!==c&&(c="",b=!1);continue}e+=h,c+=h}}if(!f)throw new be.BaseError("Unable to normalize signature.");return e}function bS(a,b={}){let{prepare:c=!0}=b,d=Array.isArray(a)||"string"==typeof a?function(a){let b;if("string"==typeof a)b=(0,bd.parseSignature)(a);else{let c=(0,bc.parseStructs)(a),d=a.length;for(let e=0;e<d;e++){let d=a[e];if(!(0,bb.isStructSignature)(d)){b=(0,bd.parseSignature)(d,c);break}}}if(!b)throw new ba.InvalidAbiItemError({signature:a});return b}(a):a;return{...d,...c?{hash:bV(d)}:{}}}function bT(a,b,c){let d,{args:e=[],prepare:f=!0}=c??{},g=bw.validate(b,{strict:!1}),h=a.filter(a=>g?"function"===a.type||"error"===a.type?bU(a)===bw.slice(b,0,4):"event"===a.type&&bV(a)===b:"name"in a&&a.name===b);if(0===h.length)throw new bX({name:b});if(1===h.length)return{...h[0],...f?{hash:bV(h[0])}:{}};for(let a of h){if("inputs"in a){if(!e||0===e.length){if(!a.inputs||0===a.inputs.length)return{...a,...f?{hash:bV(a)}:{}};continue}if(a.inputs&&0!==a.inputs.length&&a.inputs.length===e.length&&e.every((b,c)=>{let d="inputs"in a&&a.inputs[c];return!!d&&function a(b,c){let d=typeof b,e=c.type;switch(e){case"address":return bN(b,{strict:!1});case"bool":return"boolean"===d;case"function":case"string":return"string"===d;default:if("tuple"===e&&"components"in c)return Object.values(c.components).every((c,d)=>a(Object.values(b)[d],c));if(/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(e))return"number"===d||"bigint"===d;if(/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(e))return"string"===d||b instanceof Uint8Array;if(/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(e))return Array.isArray(b)&&b.every(b=>a(b,{...c,type:e.replace(/(\[[0-9]{0,}\])$/,"")}));return!1}}(b,d)})){if(d&&"inputs"in d&&d.inputs){let b=function a(b,c,d){for(let e in b){let f=b[e],g=c[e];if("tuple"===f.type&&"tuple"===g.type&&"components"in f&&"components"in g)return a(f.components,g.components,d[e]);let h=[f.type,g.type];if(h.includes("address")&&h.includes("bytes20")||(h.includes("address")&&h.includes("string")||h.includes("address")&&h.includes("bytes"))&&bN(d[e],{strict:!1}))return h}}(a.inputs,d.inputs,e);if(b)throw new bW({abiItem:a,type:b[0]},{abiItem:d,type:b[1]})}d=a}}}let i=(()=>{if(d)return d;let[a,...b]=h;return{...a,overloads:b}})();if(!i)throw new bX({name:b});return{...i,...f?{hash:bV(i)}:{}}}function bU(...a){let b=(()=>{if(Array.isArray(a[0])){let[b,c]=a;return bT(b,c)}return a[0]})();return bw.slice(bV(b),0,4)}function bV(...a){let b=(()=>{if(Array.isArray(a[0])){let[b,c]=a;return bT(b,c)}return a[0]})();return"string"!=typeof b&&"hash"in b&&b.hash?b.hash:bx(bw.fromString(function(...a){let b=(()=>{if(Array.isArray(a[0])){let[b,c]=a;return bT(b,c)}return a[0]})();return bR("string"==typeof b?b:a9.formatAbiItem(b))}(b)))}class bW extends be.BaseError{constructor(a,b){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${a.type}\` in \`${bR(a9.formatAbiItem(a.abiItem))}\`, and`,`\`${b.type}\` in \`${bR(a9.formatAbiItem(b.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class bX extends be.BaseError{constructor({name:a,data:b,type:c="item"}){super(`ABI ${c}${a?` with name "${a}"`:b?` with data "${b}"`:""} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}be.BaseError;var bY=a.i(14510),bZ=a.i(1099),b$=be;let b_=/^(.*)\[([0-9]*)\]$/,b0=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,b1=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,b2=2n**256n-1n;function b3(a){let b=0;for(let c=0;c<a.length;c++){let{dynamic:d,encoded:e}=a[c];d?b+=32:b+=bw.size(e)}let c=[],d=[],e=0;for(let f=0;f<a.length;f++){let{dynamic:g,encoded:h}=a[f];g?(c.push(bw.fromNumber(b+e,{size:32})),d.push(h),e+=bw.size(h)):c.push(h)}return bw.concat(...c,...d)}function b4(a){let b=a.match(/^(.*)\[(\d+)?\]$/);return b?[b[2]?Number(b[2]):null,b[1]]:void 0}function b5(a){let{type:b}=a;if("string"===b||"bytes"===b||b.endsWith("[]"))return!0;if("tuple"===b)return a.components?.some(b5);let c=b4(a.type);return!!(c&&b5({...a,type:c[1]}))}var b6=be;let b7={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:1/0,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new cb({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(a){if(a<0||a>this.bytes.length-1)throw new ca({length:this.bytes.length,position:a})},decrementPosition(a){if(a<0)throw new b9({offset:a});let b=this.position-a;this.assertPosition(b),this.position=b},getReadCount(a){return this.positionReadCount.get(a||this.position)||0},incrementPosition(a){if(a<0)throw new b9({offset:a});let b=this.position+a;this.assertPosition(b),this.position=b},inspectByte(a){let b=a??this.position;return this.assertPosition(b),this.bytes[b]},inspectBytes(a,b){let c=b??this.position;return this.assertPosition(c+a-1),this.bytes.subarray(c,c+a)},inspectUint8(a){let b=a??this.position;return this.assertPosition(b),this.bytes[b]},inspectUint16(a){let b=a??this.position;return this.assertPosition(b+1),this.dataView.getUint16(b)},inspectUint24(a){let b=a??this.position;return this.assertPosition(b+2),(this.dataView.getUint16(b)<<8)+this.dataView.getUint8(b+2)},inspectUint32(a){let b=a??this.position;return this.assertPosition(b+3),this.dataView.getUint32(b)},pushByte(a){this.assertPosition(this.position),this.bytes[this.position]=a,this.position++},pushBytes(a){this.assertPosition(this.position+a.length-1),this.bytes.set(a,this.position),this.position+=a.length},pushUint8(a){this.assertPosition(this.position),this.bytes[this.position]=a,this.position++},pushUint16(a){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,a),this.position+=2},pushUint24(a){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,a>>8),this.dataView.setUint8(this.position+2,255&a),this.position+=3},pushUint32(a){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,a),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let a=this.inspectByte();return this.position++,a},readBytes(a,b){this.assertReadLimit(),this._touch();let c=this.inspectBytes(a);return this.position+=b??a,c},readUint8(){this.assertReadLimit(),this._touch();let a=this.inspectUint8();return this.position+=1,a},readUint16(){this.assertReadLimit(),this._touch();let a=this.inspectUint16();return this.position+=2,a},readUint24(){this.assertReadLimit(),this._touch();let a=this.inspectUint24();return this.position+=3,a},readUint32(){this.assertReadLimit(),this._touch();let a=this.inspectUint32();return this.position+=4,a},get remaining(){return this.bytes.length-this.position},setPosition(a){let b=this.position;return this.assertPosition(a),this.position=a,()=>this.position=b},_touch(){if(this.recursiveReadLimit===1/0)return;let a=this.getReadCount();this.positionReadCount.set(this.position,a+1),a>0&&this.recursiveReadCount++}};function b8(a,{recursiveReadLimit:b=8192}={}){let c=Object.create(b7);return c.bytes=a,c.dataView=new DataView(a.buffer,a.byteOffset,a.byteLength),c.positionReadCount=new Map,c.recursiveReadLimit=b,c}class b9 extends b6.BaseError{constructor({offset:a}){super(`Offset \`${a}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class ca extends b6.BaseError{constructor({length:a,position:b}){super(`Position \`${b}\` is out of bounds (\`0 < position < ${a}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class cb extends b6.BaseError{constructor({count:a,limit:b}){super(`Recursive read limit of \`${b}\` exceeded (recursive read count: \`${a}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function cc(a,b,c={}){let{as:d="Array",checksumAddress:e=!1}=c,f="string"==typeof b?bv.fromHex(b):b,g=b8(f);if(0===bv.size(f)&&a.length>0)throw new ch;if(bv.size(f)&&32>bv.size(f))throw new cg({data:"string"==typeof b?b:bw.fromBytes(b),parameters:a,size:bv.size(f)});let h=0,i="Array"===d?[]:{};for(let b=0;b<a.length;++b){let c=a[b];g.setPosition(h);let[f,j]=function a(b,c,d){var e,f,g;let{checksumAddress:h,staticPosition:i}=d,j=b4(c.type);if(j){let[d,e]=j;return function(b,c,d){let{checksumAddress:e,length:f,staticPosition:g}=d;if(!f){let d=g+bv.toNumber(b.readBytes(32)),f=d+32;b.setPosition(d);let h=bv.toNumber(b.readBytes(32)),i=b5(c),j=0,k=[];for(let d=0;d<h;++d){b.setPosition(f+(i?32*d:j));let[g,h]=a(b,c,{checksumAddress:e,staticPosition:f});j+=h,k.push(g)}return b.setPosition(g+32),[k,32]}if(b5(c)){let d=g+bv.toNumber(b.readBytes(32)),h=[];for(let g=0;g<f;++g){b.setPosition(d+32*g);let[f]=a(b,c,{checksumAddress:e,staticPosition:d});h.push(f)}return b.setPosition(g+32),[h,32]}let h=0,i=[];for(let d=0;d<f;++d){let[d,f]=a(b,c,{checksumAddress:e,staticPosition:g+h});h+=f,i.push(d)}return[i,h]}(b,{...c,type:e},{checksumAddress:h,length:d,staticPosition:i})}if("tuple"===c.type)return function(b,c,d){let{checksumAddress:e,staticPosition:f}=d,g=0===c.components.length||c.components.some(({name:a})=>!a),h=g?[]:{},i=0;if(b5(c)){let d=f+bv.toNumber(b.readBytes(32));for(let f=0;f<c.components.length;++f){let j=c.components[f];b.setPosition(d+i);let[k,l]=a(b,j,{checksumAddress:e,staticPosition:d});i+=l,h[g?f:j?.name]=k}return b.setPosition(f+32),[h,32]}for(let d=0;d<c.components.length;++d){let j=c.components[d],[k,l]=a(b,j,{checksumAddress:e,staticPosition:f});h[g?d:j?.name]=k,i+=l}return[h,i]}(b,c,{checksumAddress:h,staticPosition:i});if("address"===c.type)return function(a,b={}){let c,{checksum:d=!1}=b,e=a.readBytes(32);return[(c=bw.fromBytes(bv.slice(e,-20)),d?bM(c):c),32]}(b,{checksum:h});if("bool"===c.type){return e=b,[bv.toBoolean(e.readBytes(32),{size:32}),32]}if(c.type.startsWith("bytes"))return function(a,b,{staticPosition:c}){let[d,e]=b.type.split("bytes");if(!e){let b=bv.toNumber(a.readBytes(32));a.setPosition(c+b);let d=bv.toNumber(a.readBytes(32));if(0===d)return a.setPosition(c+32),["0x",32];let e=a.readBytes(d);return a.setPosition(c+32),[bw.fromBytes(e),32]}return[bw.fromBytes(a.readBytes(Number.parseInt(e,10),32)),32]}(b,c,{staticPosition:i});if(c.type.startsWith("uint")||c.type.startsWith("int")){let a,d,e;return f=b,a=(g=c).type.startsWith("int"),d=Number.parseInt(g.type.split("int")[1]||"256",10),e=f.readBytes(32),[d>48?bv.toBigInt(e,{signed:a}):bv.toNumber(e,{signed:a}),32]}if("string"===c.type)return function(a,{staticPosition:b}){let c=bv.toNumber(a.readBytes(32));a.setPosition(b+c);let d=bv.toNumber(a.readBytes(32));if(0===d)return a.setPosition(b+32),["",32];let e=a.readBytes(d,32),f=bv.toString(bv.trimLeft(e));return a.setPosition(b+32),[f,32]}(b,{staticPosition:i});throw new cm(c.type)}(g,c,{checksumAddress:e,staticPosition:0});h+=j,"Array"===d?i.push(f):i[c.name??b]=f}return i}function cd(a,b,c){let{checksumAddress:d=!1}=c??{};if(a.length!==b.length)throw new ck({expectedLength:a.length,givenLength:b.length});let e=b3(function({checksumAddress:a,parameters:b,values:c}){let d=[];for(let e=0;e<b.length;e++)d.push(function a({checksumAddress:b=!1,parameter:c,value:d}){let e=b4(c.type);if(e){let[f,g]=e;return function(b,c){let{checksumAddress:d,length:e,parameter:f}=c,g=null===e;if(!Array.isArray(b))throw new cl(b);if(!g&&b.length!==e)throw new ci({expectedLength:e,givenLength:b.length,type:`${f.type}[${e}]`});let h=!1,i=[];for(let c=0;c<b.length;c++){let e=a({checksumAddress:d,parameter:f,value:b[c]});e.dynamic&&(h=!0),i.push(e)}if(g||h){let a=b3(i);if(g){let b=bw.fromNumber(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?bw.concat(b,a):b}}if(h)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:bw.concat(...i.map(({encoded:a})=>a))}}(d,{checksumAddress:b,length:f,parameter:{...c,type:g}})}if("tuple"===c.type)return function(b,c){let{checksumAddress:d,parameter:e}=c,f=!1,g=[];for(let c=0;c<e.components.length;c++){let h=e.components[c],i=Array.isArray(b)?c:h.name,j=a({checksumAddress:d,parameter:h,value:b[i]});g.push(j),j.dynamic&&(f=!0)}return{dynamic:f,encoded:f?b3(g):bw.concat(...g.map(({encoded:a})=>a))}}(d,{checksumAddress:b,parameter:c});if("address"===c.type)return function(a,b){let{checksum:c=!1}=b;return bL(a,{strict:c}),{dynamic:!1,encoded:bw.padLeft(a.toLowerCase())}}(d,{checksum:b});if("bool"===c.type){var f=d;if("boolean"!=typeof f)throw new be.BaseError(`Invalid boolean value: "${f}" (type: ${typeof f}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:bw.padLeft(bw.fromBoolean(f))}}if(c.type.startsWith("uint")||c.type.startsWith("int")){let a=c.type.startsWith("int"),[,,b="256"]=b1.exec(c.type)??[];return function(a,{signed:b,size:c}){if("number"==typeof c){let d=2n**(BigInt(c)-(b?1n:0n))-1n,e=b?-d-1n:0n;if(a>d||a<e)throw new bw.IntegerOutOfRangeError({max:d.toString(),min:e.toString(),signed:b,size:c/8,value:a.toString()})}return{dynamic:!1,encoded:bw.fromNumber(a,{size:32,signed:b})}}(d,{signed:a,size:Number(b)})}if(c.type.startsWith("bytes"))return function(a,{type:b}){let[,c]=b.split("bytes"),d=bw.size(a);if(!c){let b=a;return d%32!=0&&(b=bw.padRight(b,32*Math.ceil((a.length-2)/2/32))),{dynamic:!0,encoded:bw.concat(bw.padLeft(bw.fromNumber(d,{size:32})),b)}}if(d!==Number.parseInt(c,10))throw new cj({expectedSize:Number.parseInt(c,10),value:a});return{dynamic:!1,encoded:bw.padRight(a)}}(d,{type:c.type});if("string"===c.type){var g=d;let a=bw.fromString(g),b=Math.ceil(bw.size(a)/32),c=[];for(let d=0;d<b;d++)c.push(bw.padRight(bw.slice(a,32*d,(d+1)*32)));return{dynamic:!0,encoded:bw.concat(bw.padRight(bw.fromNumber(bw.size(a),{size:32})),...c)}}throw new cm(c.type)}({checksumAddress:a,parameter:b[e],value:c[e]}));return d}({checksumAddress:d,parameters:a,values:b}));return 0===e.length?"0x":e}function ce(a,b){if(a.length!==b.length)throw new ck({expectedLength:a.length,givenLength:b.length});let c=[];for(let d=0;d<a.length;d++){let e=a[d],f=b[d];c.push(ce.encode(e,f))}return bw.concat(...c)}function cf(a){return Array.isArray(a)&&"string"==typeof a[0]||"string"==typeof a?function(a){let b=[];if("string"==typeof a){let c=(0,bd.splitParameters)(a),d=c.length;for(let a=0;a<d;a++)b.push((0,bd.parseAbiParameter)(c[a],{modifiers:bb.modifiers}))}else{let c=(0,bc.parseStructs)(a),d=a.length;for(let e=0;e<d;e++){let d=a[e];if((0,bb.isStructSignature)(d))continue;let f=(0,bd.splitParameters)(d),g=f.length;for(let a=0;a<g;a++)b.push((0,bd.parseAbiParameter)(f[a],{modifiers:bb.modifiers,structs:c}))}}if(0===b.length)throw new bZ.InvalidAbiParametersError({params:a});return b}(a):a}(ce||(ce={})).encode=function a(b,c,d=!1){if("address"===b)return bL(c),bw.padLeft(c.toLowerCase(),32*!!d);if("string"===b)return bw.fromString(c);if("bytes"===b)return c;if("bool"===b)return bw.padLeft(bw.fromBoolean(c),d?32:1);let e=b.match(b1);if(e){let[a,b,f="256"]=e,g=Number.parseInt(f,10)/8;return bw.fromNumber(c,{size:d?32:g,signed:"int"===b})}let f=b.match(b0);if(f){let[a,b]=f;if(Number.parseInt(b,10)!==(c.length-2)/2)throw new cj({expectedSize:Number.parseInt(b,10),value:c});return bw.padRight(c,32*!!d)}let g=b.match(b_);if(g&&Array.isArray(c)){let[b,d]=g,e=[];for(let b=0;b<c.length;b++)e.push(a(d,c[b],!0));return 0===e.length?"0x":bw.concat(...e)}throw new cm(b)};class cg extends b$.BaseError{constructor({data:a,parameters:b,size:c}){super(`Data size of ${c} bytes is too small for given parameters.`,{metaMessages:[`Params: (${bY.formatAbiParameters(b)})`,`Data:   ${a} (${c} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class ch extends b$.BaseError{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class ci extends b$.BaseError{constructor({expectedLength:a,givenLength:b,type:c}){super(`Array length mismatch for type \`${c}\`. Expected: \`${a}\`. Given: \`${b}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class cj extends b$.BaseError{constructor({expectedSize:a,value:b}){super(`Size of bytes "${b}" (bytes${bw.size(b)}) does not match expected size (bytes${a}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class ck extends b$.BaseError{constructor({expectedLength:a,givenLength:b}){super(`ABI encoding parameters/values length mismatch.
Expected length (parameters): ${a}
Given length (values): ${b}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class cl extends b$.BaseError{constructor(a){super(`Value \`${a}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class cm extends b$.BaseError{constructor(a){super(`Type \`${a}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function cn(a,b={}){return bS(a,b)}function co(a,b,c){let d=bT(a,b,c);if("function"!==d.type)throw new bX({name:b,type:"function"});return d}let cp="0x0000000000000000000000000000000000000000";async function cq(a,b){let{blockNumber:c,blockTag:d,calls:e,stateOverrides:f,traceAssetChanges:g,traceTransfers:h,validation:i}=b,j=b.account?(0,ak.parseAccount)(b.account):void 0;if(g&&!j)throw new B.BaseError("`account` is required when `traceAssetChanges` is true");let k=j?function(...a){let[b,c]=(()=>{if(Array.isArray(a[0])){let[b,c]=a;return[function(a){let b=a.find(a=>"constructor"===a.type);if(!b)throw new bX({name:"constructor"});return b}(b),c]}return a})(),{bytecode:d,args:e}=c;return bw.concat(d,b.inputs?.length&&e?.length?cd(b.inputs,e):"0x")}(bS("constructor(bytes, bytes)"),{bytecode:a0.deploylessCallViaBytecodeBytecode,args:["0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033",function(...a){let[b,c=[]]=(()=>{if(Array.isArray(a[0])){let[b,c,d]=a;return[co(b,c,{args:d}),d]}let[b,c]=a;return[b,c]})(),{overloads:d}=b,e=d?co([b,...d],b.name,{args:c}):b,f=bU(e),g=c.length>0?cd(e.inputs,c):void 0;return g?bw.concat(f,g):f}(cn("function getBalance(address)"),[j.address])]}):void 0,l=g?await Promise.all(b.calls.map(async b=>{if(!b.data&&!b.abi)return;let{accessList:c}=await ap(a,{account:j.address,...b,data:b.abi?(0,x.encodeFunctionData)(b):b.data});return c.map(({address:a,storageKeys:b})=>b.length>0?a:null)})).then(a=>a.flat().filter(Boolean)):[],m=await a8(a,{blockNumber:c,blockTag:d,blocks:[...g?[{calls:[{data:k}],stateOverrides:f},{calls:l.map((a,b)=>({abi:[cn("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[j.address],to:a,from:cp,nonce:b})),stateOverrides:[{address:cp,nonce:0}]}]:[],{calls:[...e,{}].map(a=>({...a,from:j?.address})),stateOverrides:f},...g?[{calls:[{data:k}]},{calls:l.map((a,b)=>({abi:[cn("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[j.address],to:a,from:cp,nonce:b})),stateOverrides:[{address:cp,nonce:0}]},{calls:l.map((a,b)=>({to:a,abi:[cn("function decimals() returns (uint256)")],functionName:"decimals",from:cp,nonce:b})),stateOverrides:[{address:cp,nonce:0}]},{calls:l.map((a,b)=>({to:a,abi:[cn("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:cp,nonce:b})),stateOverrides:[{address:cp,nonce:0}]},{calls:l.map((a,b)=>({to:a,abi:[cn("function symbol() returns (string)")],functionName:"symbol",from:cp,nonce:b})),stateOverrides:[{address:cp,nonce:0}]}]:[]],traceTransfers:h,validation:i}),n=g?m[2]:m[0],[o,p,,q,r,s,t,u]=g?m:[],{calls:v,...w}=n,y=v.slice(0,-1)??[],z=[...o?.calls??[],...p?.calls??[]].map(a=>"success"===a.status?(0,aG.hexToBigInt)(a.data):null),A=[...q?.calls??[],...r?.calls??[]].map(a=>"success"===a.status?(0,aG.hexToBigInt)(a.data):null),C=(s?.calls??[]).map(a=>"success"===a.status?a.result:null),D=(u?.calls??[]).map(a=>"success"===a.status?a.result:null),E=(t?.calls??[]).map(a=>"success"===a.status?a.result:null),F=[];for(let[a,b]of A.entries()){let c=z[a];if("bigint"!=typeof b||"bigint"!=typeof c)continue;let d=C[a-1],e=D[a-1],f=E[a-1],g=0===a?{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimals:18,symbol:"ETH"}:{address:l[a-1],decimals:f||d?Number(d??1):void 0,symbol:e??void 0};F.some(a=>a.token.address===g.address)||F.push({token:g,value:{pre:c,post:b,diff:b-c}})}return{assetChanges:F,block:w,results:y}}async function cr(a,b){let{abi:c,address:d,args:e,dataSuffix:f,functionName:g,...h}=b,i=h.account?(0,ak.parseAccount)(h.account):a.account,j=(0,x.encodeFunctionData)({abi:c,args:e,functionName:g});try{let{data:k}=await (0,M.getAction)(a,aj.call,"call")({batch:!1,data:`${j}${f?f.replace("0x",""):""}`,to:d,...h,account:i}),l=(0,w.decodeFunctionResult)({abi:c,args:e,functionName:g,data:k||"0x"}),m=c.filter(a=>"name"in a&&a.name===b.functionName);return{result:l,request:{abi:m,address:d,args:e,dataSuffix:f,functionName:g,...h,account:i}}}catch(a){throw(0,aw.getContractError)(a,{abi:c,address:d,args:e,docsPath:"/docs/contract/simulateContract",functionName:g,sender:i?.address})}}var cs=a.i(69328),ct=be;let cu="0x6492649264926492649264926492649264926492649264926492649264926492";function cv(a){if(bw.slice(a,-32)!==cu)throw new cA(a)}function cw(a){return"string"==typeof a?cx(a):a}function cx(a){cv(a);let[b,c,d]=cc(cf("address, bytes, bytes"),a);return{data:c,signature:d,to:b}}function cy(a){let{data:b,signature:c,to:d}=a;return bw.concat(cd(cf("address, bytes, bytes"),[d,b,c]),cu)}function cz(a){try{return cv(a),!0}catch{return!1}}class cA extends ct.BaseError{constructor(a){super(`Value \`${a}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}a.s(["InvalidWrappedSignatureError",()=>cA,"assert",()=>cv,"from",()=>cw,"magicBytes",0,cu,"universalSignatureValidatorAbi",0,[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],"universalSignatureValidatorBytecode",0,"0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572","unwrap",()=>cx,"validate",()=>cz,"wrap",()=>cy],25423);var cB=a.i(25423),cB=cB;function cC(a){if(a<=255)return 1;if(a<=65535)return 2;if(a<=0xffffff)return 3;if(a<=0xffffffff)return 4;throw new be.BaseError("Length is too large.")}var cD=a.i(38808),cE=be;function cF(a,b={}){let{recovered:c}=b;if(void 0===a.r||void 0===a.s||c&&void 0===a.yParity)throw new cL({signature:a});if(a.r<0n||a.r>b2)throw new cM({value:a.r});if(a.s<0n||a.s>b2)throw new cN({value:a.s});if("number"==typeof a.yParity&&0!==a.yParity&&1!==a.yParity)throw new cO({value:a.yParity})}function cG(a){if(130!==a.length&&132!==a.length)throw new cK({signature:a});let b=BigInt(bw.slice(a,0,32)),c=BigInt(bw.slice(a,32,64)),d=(()=>{let b=Number(`0x${a.slice(130)}`);if(!Number.isNaN(b))try{return cJ(b)}catch{throw new cO({value:b})}})();return void 0===d?{r:b,s:c}:{r:b,s:c,yParity:d}}function cH(a){if(void 0!==a.r&&void 0!==a.s)return cI(a)}function cI(a){let b=(()=>{var b,c;let d;if("string"==typeof a)return cG(a);if(a instanceof Uint8Array)return cG(bw.fromBytes(a));return"string"==typeof a.r?(b=a,d=(()=>{let a=b.v?Number(b.v):void 0,c=b.yParity?Number(b.yParity):void 0;if("number"==typeof a&&"number"!=typeof c&&(c=cJ(a)),"number"!=typeof c)throw new cO({value:b.yParity});return c})(),{r:BigInt(b.r),s:BigInt(b.s),yParity:d}):a.v?{r:(c=a).r,s:c.s,yParity:cJ(c.v)}:{r:a.r,s:a.s,...void 0!==a.yParity?{yParity:a.yParity}:{}}})();return cF(b),b}function cJ(a){if(0===a||27===a)return 0;if(1===a||28===a)return 1;if(a>=35)return+(a%2==0);throw new cP({value:a})}class cK extends cE.BaseError{constructor({signature:a}){super(`Value \`${a}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${bw.size(bw.from(a))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class cL extends cE.BaseError{constructor({signature:a}){super(`Signature \`${bC.stringify(a)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class cM extends cE.BaseError{constructor({value:a}){super(`Value \`${a}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class cN extends cE.BaseError{constructor({value:a}){super(`Value \`${a}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class cO extends cE.BaseError{constructor({value:a}){super(`Value \`${a}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class cP extends cE.BaseError{constructor({value:a}){super(`Value \`${a}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}var cQ=be;cD.secp256k1;let cR="0x8010801080108010801080108010801080108010801080108010801080108010",cS=cf("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function cT(a){if("string"==typeof a){if(bw.slice(a,-32)!==cR)throw new cY(a)}else cF(a.authorization)}function cU(a){return"string"==typeof a?cV(a):a}function cV(a){cT(a);let b=bw.toNumber(bw.slice(a,-64,-32)),c=bw.slice(a,-b-64,-64),d=bw.slice(a,0,-b-64),[e,f,g]=cc(cS,c);return{authorization:function(a,b={}){return"string"==typeof a.chainId?function(a){let{address:b,chainId:c,nonce:d}=a,e=cH(a);return{address:b,chainId:Number(c),nonce:BigInt(d),...e}}(a):{...a,...b.signature}}({address:e.delegation,chainId:Number(e.chainId),nonce:e.nonce,yParity:e.yParity,r:e.r,s:e.s}),signature:d,...g&&"0x"!==g?{data:g,to:f}:{}}}function cW(a){let{data:b,signature:c}=a;cT(a);let d=function(a,b={}){let c=bx(`0x${(function(a,b={}){bD(a);let{prefix:c,x:d,y:e}=a,{includePrefix:f=!0}=b;return bw.concat(f?bw.fromNumber(c,{size:1}):"0x",bw.fromNumber(d,{size:32}),"bigint"==typeof e?bw.fromNumber(e,{size:32}):"0x")})(a).slice(4)}`).substring(26);return function(a,b={}){let{checksum:c=!1}=b;return(bL(a),c)?bM(a):a}(`0x${c}`,b)}(function(a){var b;let c,{payload:d,signature:e}=a,{r:f,s:g,yParity:h}=e;return b=new cD.secp256k1.Signature(BigInt(f),BigInt(g)).addRecoveryBit(h).recoverPublicKey(bw.from(d).substring(2)),bD(c=(()=>{if(bw.validate(b))return bE(b);if(bv.validate(b)){var a;return a=b,bE(bw.fromBytes(a))}let{prefix:c,x:d,y:e}=b;return"bigint"==typeof d&&"bigint"==typeof e?{prefix:c??4,x:d,y:e}:{prefix:c,x:d}})()),c}({payload:function(a,b={}){let{presign:c}=b;return bx(bw.concat("0x05",function(a,b={}){let{as:c="Hex"}=b;return function(a,b){let{as:c}=b,d=function a(b){var c,d;let e,f,g,h;return Array.isArray(b)?(f=cC(e=(c=b.map(b=>a(b))).reduce((a,b)=>a+b.length,0)),{length:e<=55?1+e:1+f+e,encode(a){for(let{encode:b}of(e<=55?a.pushByte(192+e):(a.pushByte(247+f),1===f?a.pushUint8(e):2===f?a.pushUint16(e):3===f?a.pushUint24(e):a.pushUint32(e)),c))b(a)}}):(h=cC((g="string"==typeof(d=b)?bv.fromHex(d):d).length),{length:1===g.length&&g[0]<128?1:g.length<=55?1+g.length:1+h+g.length,encode(a){1===g.length&&g[0]<128||(g.length<=55?a.pushByte(128+g.length):(a.pushByte(183+h),1===h?a.pushUint8(g.length):2===h?a.pushUint16(g.length):3===h?a.pushUint24(g.length):a.pushUint32(g.length))),a.pushBytes(g)}})}(a),e=b8(new Uint8Array(d.length));return(d.encode(e),"Hex"===c)?bw.fromBytes(e.bytes):e.bytes}(a,{as:c})}(function(a){let{address:b,chainId:c,nonce:d}=a,e=cH(a);return[c?bw.fromNumber(c):"0x",b,d?bw.fromNumber(d):"0x",...e?function(a){let{r:b,s:c,yParity:d}=a;return[d?"0x01":"0x",0n===b?"0x":bw.trimLeft(bw.fromNumber(b)),0n===c?"0x":bw.trimLeft(bw.fromNumber(c))]}(e):[]]}(c?{address:a.address,chainId:a.chainId,nonce:a.nonce}:a))))}(a.authorization,{presign:!0}),signature:cI(a.authorization)})),e=cd(cS,[{...a.authorization,delegation:a.authorization.address,chainId:BigInt(a.authorization.chainId)},a.to??d,b??"0x"]),f=bw.fromNumber(bw.size(e),{size:32});return bw.concat(c,e,f,cR)}function cX(a){try{return cT(a),!0}catch{return!1}}class cY extends cQ.BaseError{constructor(a){super(`Value \`${a}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}}a.s(["InvalidWrappedSignatureError",()=>cY,"assert",()=>cT,"from",()=>cU,"magicBytes",0,cR,"suffixParameters",0,cS,"unwrap",()=>cV,"validate",()=>cX,"wrap",()=>cW],91595);var cZ=a.i(91595),cZ=cZ,c$=a.i(6340),c_=a.i(33947),c0=a.i(59368),c1=a.i(77810);async function c2({address:a,authorization:b,signature:c}){return(0,c0.isAddressEqual)((0,c_.getAddress)(a),await (0,c1.recoverAuthorizationAddress)({authorization:b,signature:c}))}var c3=a.i(65883);async function c4(a,b){let c,{address:d,chain:e=a.chain,hash:f,erc6492VerifierAddress:g=b.universalSignatureVerifierAddress??e?.contracts?.erc6492Verifier?.address,multicallAddress:h=b.multicallAddress??e?.contracts?.multicall3?.address}=b;if(e?.verifyHash)return await e.verifyHash(a,b);let i=(c=b.signature,(0,I.isHex)(c)?c:"object"==typeof c&&"r"in c&&"s"in c?function({r:a,s:b,to:c="hex",v:d,yParity:e}){let f=(()=>{if(0===e||1===e)return e;if(d&&(27n===d||28n===d||d>=35n))return+(d%2n===0n);throw Error("Invalid `v` or `yParity` value")})(),g=`0x${new cD.secp256k1.Signature((0,aG.hexToBigInt)(a),(0,aG.hexToBigInt)(b)).toCompactHex()}${0===f?"1b":"1c"}`;return"hex"===c?g:(0,G.hexToBytes)(g)}(c):(0,A.bytesToHex)(c));try{if(cZ.validate(i))return await c5(a,{...b,multicallAddress:h,signature:i});return await c6(a,{...b,verifierAddress:g,signature:i})}catch(a){try{if((0,c0.isAddressEqual)((0,c_.getAddress)(d),await (0,c3.recoverAddress)({hash:f,signature:i})))return!0}catch{}if(a instanceof c8)return!1;throw a}}async function c5(a,b){let{address:c,blockNumber:d,blockTag:e,hash:f,multicallAddress:g}=b,{authorization:h,data:i,signature:j,to:k}=cZ.unwrap(b.signature);if(await aJ(a,{address:c,blockNumber:d,blockTag:e})===(0,F.concatHex)(["0xef0100",h.address]))return await c7(a,{address:c,blockNumber:d,blockTag:e,hash:f,signature:j});let l={address:h.address,chainId:Number(h.chainId),nonce:Number(h.nonce),r:(0,A.numberToHex)(h.r,{size:32}),s:(0,A.numberToHex)(h.s,{size:32}),yParity:h.yParity};if(!await c2({address:c,authorization:l}))throw new c8;let m=await (0,M.getAction)(a,N.readContract,"readContract")({...g?{address:g}:{code:a0.multicall3Bytecode},authorizationList:[l],abi:v.multicall3Abi,blockNumber:d,blockTag:"pending",functionName:"aggregate3",args:[[...i?[{allowFailure:!0,target:k??c,callData:i}]:[],{allowFailure:!0,target:c,callData:(0,x.encodeFunctionData)({abi:v.erc1271Abi,functionName:"isValidSignature",args:[f,j]})}]]}),n=m[m.length-1]?.returnData;if(n?.startsWith("0x1626ba7e"))return!0;throw new c8}async function c6(a,b){let{address:c,factory:d,factoryData:e,hash:f,signature:g,verifierAddress:h,...i}=b,j=await (async()=>!d&&!e||cB.validate(g)?g:cB.wrap({data:e,signature:g,to:d}))(),k=h?{to:h,data:(0,x.encodeFunctionData)({abi:v.erc6492SignatureValidatorAbi,functionName:"isValidSig",args:[c,f,j]}),...i}:{data:(0,c$.encodeDeployData)({abi:v.erc6492SignatureValidatorAbi,args:[c,f,j],bytecode:a0.erc6492SignatureValidatorByteCode}),...i},{data:l}=await (0,M.getAction)(a,aj.call,"call")(k).catch(a=>{if(a instanceof C.CallExecutionError)throw new c8;throw a});if((0,aG.hexToBool)(l??"0x0"))return!0;throw new c8}async function c7(a,b){let{address:c,blockNumber:d,blockTag:e,hash:f,signature:g}=b;if((await (0,M.getAction)(a,N.readContract,"readContract")({address:c,abi:v.erc1271Abi,args:[f,g],blockNumber:d,blockTag:e,functionName:"isValidSignature"}).catch(a=>{if(a instanceof C.ContractFunctionExecutionError)throw new c8;throw a})).startsWith("0x1626ba7e"))return!0;throw new c8}class c8 extends Error{}var c9=a.i(40724);function da(a,b){let c,d;return(0,H.keccak256)((c="string"==typeof a?(0,A.stringToHex)(a):"string"==typeof a.raw?a.raw:(0,A.bytesToHex)(a.raw),d=(0,A.stringToHex)(`\x19Ethereum Signed Message:
${(0,c9.size)(c)}`),(0,F.concat)([d,c])),b)}async function db(a,{address:b,message:c,factory:d,factoryData:e,signature:f,...g}){let h=da(c);return(0,M.getAction)(a,c4,"verifyHash")({address:b,factory:d,factoryData:e,hash:h,signature:f,...g})}var dc=a.i(26600),dd=a.i(19425),de=a.i(87676),df=B;class dg extends df.BaseError{constructor({domain:a}){super(`Invalid domain "${(0,de.stringify)(a)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class dh extends df.BaseError{constructor({primaryType:a,types:b}){super(`Invalid primary type \`${a}\` must be one of \`${JSON.stringify(Object.keys(b))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class di extends df.BaseError{constructor({type:a}){super(`Struct type "${a}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}var dj=a.i(73160),dk=a.i(31260);function dl({data:a,primaryType:b,types:c}){let d=function a({data:b,primaryType:c,types:d}){let e=[{type:"bytes32"}],f=[function({primaryType:a,types:b}){let c=(0,A.toHex)(function({primaryType:a,types:b}){let c="",d=function a({primaryType:b,types:c},d=new Set){let e=b.match(/^\w*/u),f=e?.[0];if(d.has(f)||void 0===c[f])return d;for(let b of(d.add(f),c[f]))a({primaryType:b.type,types:c},d);return d}({primaryType:a,types:b});for(let e of(d.delete(a),[a,...Array.from(d).sort()]))c+=`${e}(${b[e].map(({name:a,type:b})=>`${b} ${a}`).join(",")})`;return c}({primaryType:a,types:b}));return(0,H.keccak256)(c)}({primaryType:c,types:d})];for(let g of d[c]){let[c,h]=function b({types:c,name:d,type:e,value:f}){if(void 0!==c[e])return[{type:"bytes32"},(0,H.keccak256)(a({data:f,primaryType:e,types:c}))];if("bytes"===e)return[{type:"bytes32"},(0,H.keccak256)(f)];if("string"===e)return[{type:"bytes32"},(0,H.keccak256)((0,A.toHex)(f))];if(e.lastIndexOf("]")===e.length-1){let a=e.slice(0,e.lastIndexOf("[")),g=f.map(e=>b({name:d,type:a,types:c,value:e}));return[{type:"bytes32"},(0,H.keccak256)((0,dc.encodeAbiParameters)(g.map(([a])=>a),g.map(([,a])=>a)))]}return[{type:e},f]}({types:d,name:g.name,type:g.type,value:b[g.name]});e.push(c),f.push(h)}return(0,dc.encodeAbiParameters)(e,f)}({data:a,primaryType:b,types:c});return(0,H.keccak256)(d)}async function dm(a,b){let{address:c,factory:d,factoryData:e,signature:f,message:g,primaryType:h,types:i,domain:j,...k}=b,l=function(a){let{domain:b={},message:c,primaryType:d}=a,e={EIP712Domain:function({domain:a}){return["string"==typeof a?.name&&{name:"name",type:"string"},a?.version&&{name:"version",type:"string"},("number"==typeof a?.chainId||"bigint"==typeof a?.chainId)&&{name:"chainId",type:"uint256"},a?.verifyingContract&&{name:"verifyingContract",type:"address"},a?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}({domain:b}),...a.types};!function(a){let{domain:b,message:c,primaryType:d,types:e}=a,f=(a,b)=>{for(let c of a){let{name:a,type:d}=c,g=b[a],h=d.match(dk.integerRegex);if(h&&("number"==typeof g||"bigint"==typeof g)){let[a,b,c]=h;(0,A.numberToHex)(g,{signed:"int"===b,size:Number.parseInt(c,10)/8})}if("address"===d&&"string"==typeof g&&!(0,dj.isAddress)(g))throw new dd.InvalidAddressError({address:g});let i=d.match(dk.bytesRegex);if(i){let[a,b]=i;if(b&&(0,c9.size)(g)!==Number.parseInt(b,10))throw new a1.BytesSizeMismatchError({expectedSize:Number.parseInt(b,10),givenSize:(0,c9.size)(g)})}let j=e[d];j&&(function(a){if("address"===a||"bool"===a||"string"===a||a.startsWith("bytes")||a.startsWith("uint")||a.startsWith("int"))throw new di({type:a})}(d),f(j,g))}};if(e.EIP712Domain&&b){if("object"!=typeof b)throw new dg({domain:b});f(e.EIP712Domain,b)}if("EIP712Domain"!==d)if(e[d])f(e[d],c);else throw new dh({primaryType:d,types:e})}({domain:b,message:c,primaryType:d,types:e});let f=["0x1901"];return b&&f.push(function({domain:a,types:b}){return dl({data:a,primaryType:"EIP712Domain",types:b})}({domain:b,types:e})),"EIP712Domain"!==d&&f.push(dl({data:c,primaryType:d,types:e})),(0,H.keccak256)((0,F.concat)(f))}({message:g,primaryType:h,types:i,domain:j});return(0,M.getAction)(a,c4,"verifyHash")({address:c,factory:d,factoryData:e,hash:l,signature:f,...k})}var dn=a.i(47695),dp=a.i(69406),dq=a.i(55140),dr=a.i(33479),ds=a.i(360),dt=a.i(77631),du=a.i(34976);let dv=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,dw=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;async function dx(a,b){let{address:c,domain:d,message:e,nonce:f,scheme:g,signature:h,time:i=new Date,...j}=b,k=function(a){let{scheme:b,statement:c,...d}=a.match(dv)?.groups??{},{chainId:e,expirationTime:f,issuedAt:g,notBefore:h,requestId:i,...j}=a.match(dw)?.groups??{},k=a.split("Resources:")[1]?.split("\n- ").slice(1);return{...d,...j,...e?{chainId:Number(e)}:{},...f?{expirationTime:new Date(f)}:{},...g?{issuedAt:new Date(g)}:{},...h?{notBefore:new Date(h)}:{},...i?{requestId:i}:{},...k?{resources:k}:{},...b?{scheme:b}:{},...c?{statement:c}:{}}}(e);if(!k.address||!function(a){let{address:b,domain:c,message:d,nonce:e,scheme:f,time:g=new Date}=a;if(c&&d.domain!==c||e&&d.nonce!==e||f&&d.scheme!==f||d.expirationTime&&g>=d.expirationTime||d.notBefore&&g<d.notBefore)return!1;try{if(!d.address||!(0,dj.isAddress)(d.address,{strict:!1})||b&&!(0,c0.isAddressEqual)(d.address,b))return!1}catch{return!1}return!0}({address:c,domain:d,message:k,nonce:f,scheme:g,time:i}))return!1;let l=da(e);return c4(a,{address:k.address,hash:l,signature:h,...j})}var dy=a.i(66468),dz=a.i(50979),dA=a.i(73080),dB=a.i(61085);async function dC(a,{serializedTransaction:b,throwOnReceiptRevert:c,timeout:d}){let e=await a.request({method:"eth_sendRawTransactionSync",params:d?[b,(0,A.numberToHex)(d)]:[b]},{retryCount:0}),f=(a.chain?.formatters?.transactionReceipt?.format||dB.formatTransactionReceipt)(e);if("reverted"===f.status&&c)throw new dA.TransactionReceiptRevertedError({receipt:f});return f}function dD(a){return{call:b=>(0,aj.call)(a,b),createAccessList:b=>ap(a,b),createBlockFilter:()=>ar(a),createContractEventFilter:b=>(0,as.createContractEventFilter)(a,b),createEventFilter:b=>au(a,b),createPendingTransactionFilter:()=>av(a),estimateContractGas:b=>ay(a,b),estimateGas:b=>(0,ax.estimateGas)(a,b),getBalance:b=>(0,aC.getBalance)(a,b),getBlobBaseFee:()=>aD(a),getBlock:b=>(0,aE.getBlock)(a,b),getBlockNumber:b=>(0,aF.getBlockNumber)(a,b),getBlockTransactionCount:b=>aH(a,b),getBytecode:b=>aJ(a,b),getChainId:()=>(0,aI.getChainId)(a),getCode:b=>aJ(a,b),getContractEvents:b=>(0,aK.getContractEvents)(a,b),getEip712Domain:b=>aN(a,b),getEnsAddress:b=>O(a,b),getEnsAvatar:b=>ag(a,b),getEnsName:b=>ah(a,b),getEnsResolver:b=>ai(a,b),getEnsText:b=>af(a,b),getFeeHistory:b=>aP(a,b),estimateFeesPerGas:b=>(0,az.estimateFeesPerGas)(a,b),getFilterChanges:b=>(0,aQ.getFilterChanges)(a,b),getFilterLogs:b=>aT(a,b),getGasPrice:()=>(0,aU.getGasPrice)(a),getLogs:b=>(0,aV.getLogs)(a,b),getProof:b=>aW(a,b),estimateMaxPriorityFeePerGas:b=>(0,aA.estimateMaxPriorityFeePerGas)(a,b),fillTransaction:b=>(0,aB.fillTransaction)(a,b),getStorageAt:b=>aX(a,b),getTransaction:b=>(0,aY.getTransaction)(a,b),getTransactionConfirmations:b=>aZ(a,b),getTransactionCount:b=>(0,a$.getTransactionCount)(a,b),getTransactionReceipt:b=>(0,a_.getTransactionReceipt)(a,b),multicall:b=>a2(a,b),prepareTransactionRequest:b=>(0,dy.prepareTransactionRequest)(a,b),readContract:b=>(0,N.readContract)(a,b),sendRawTransaction:b=>(0,dz.sendRawTransaction)(a,b),sendRawTransactionSync:b=>dC(a,b),simulate:b=>a8(a,b),simulateBlocks:b=>a8(a,b),simulateCalls:b=>cq(a,b),simulateContract:b=>cr(a,b),verifyHash:b=>c4(a,b),verifyMessage:b=>db(a,b),verifySiweMessage:b=>dx(a,b),verifyTypedData:b=>dm(a,b),uninstallFilter:b=>(0,cs.uninstallFilter)(a,b),waitForTransactionReceipt:b=>(0,dn.waitForTransactionReceipt)(a,b),watchBlocks:b=>(function(a,{blockTag:b=a.experimental_blockTag??"latest",emitMissed:c=!1,emitOnBegin:d=!1,onBlock:e,onError:f,includeTransactions:g,poll:h,pollingInterval:i=a.pollingInterval}){let j,k,l,m,n,o=void 0!==h?h:"webSocket"!==a.transport.type&&"ipc"!==a.transport.type&&("fallback"!==a.transport.type||"webSocket"!==a.transport.transports[0].config.type&&"ipc"!==a.transport.transports[0].config.type),p=g??!1;return o?(k=(0,de.stringify)(["watchBlocks",a.uid,b,c,d,p,i]),(0,dq.observe)(k,{onBlock:e,onError:f},e=>(0,dr.poll)(async()=>{try{let d=await (0,M.getAction)(a,aE.getBlock,"getBlock")({blockTag:b,includeTransactions:p});if(null!==d.number&&j?.number!=null){if(d.number===j.number)return;if(d.number-j.number>1&&c)for(let b=j?.number+1n;b<d.number;b++){let c=await (0,M.getAction)(a,aE.getBlock,"getBlock")({blockNumber:b,includeTransactions:p});e.onBlock(c,j),j=c}}(j?.number==null||"pending"===b&&d?.number==null||null!==d.number&&d.number>j.number)&&(e.onBlock(d,j),j=d)}catch(a){e.onError?.(a)}},{emitOnBegin:d,interval:i}))):(l=!0,m=!0,n=()=>l=!1,(async()=>{try{d&&(0,M.getAction)(a,aE.getBlock,"getBlock")({blockTag:b,includeTransactions:p}).then(a=>{!l||m&&(e(a,void 0),m=!1)}).catch(f);let c=(()=>{if("fallback"===a.transport.type){let b=a.transport.transports.find(a=>"webSocket"===a.config.type||"ipc"===a.config.type);return b?b.value:a.transport}return a.transport})(),{unsubscribe:g}=await c.subscribe({params:["newHeads"],async onData(b){if(!l)return;let c=await (0,M.getAction)(a,aE.getBlock,"getBlock")({blockNumber:b.result?.number,includeTransactions:p}).catch(()=>{});l&&(e(c,j),m=!1,j=c)},onError(a){f?.(a)}});n=g,l||n()}catch(a){f?.(a)}})(),()=>n())})(a,b),watchBlockNumber:b=>(0,dp.watchBlockNumber)(a,b),watchContractEvent:b=>(0,ds.watchContractEvent)(a,b),watchEvent:b=>(function(a,{address:b,args:c,batch:d=!0,event:e,events:f,fromBlock:g,onError:h,onLogs:i,poll:j,pollingInterval:k=a.pollingInterval,strict:l}){let m,n,o,p=void 0!==j?j:"bigint"==typeof g||"webSocket"!==a.transport.type&&"ipc"!==a.transport.type&&("fallback"!==a.transport.type||"webSocket"!==a.transport.transports[0].config.type&&"ipc"!==a.transport.transports[0].config.type),q=l??!1;return p?(m=(0,de.stringify)(["watchEvent",b,c,d,a.uid,e,k,g]),(0,dq.observe)(m,{onLogs:i,onError:h},h=>{let i,j;void 0!==g&&(i=g-1n);let l=!1,m=(0,dr.poll)(async()=>{if(!l){try{j=await (0,M.getAction)(a,au,"createEventFilter")({address:b,args:c,event:e,events:f,strict:q,fromBlock:g})}catch{}l=!0;return}try{let g;if(j)g=await (0,M.getAction)(a,aQ.getFilterChanges,"getFilterChanges")({filter:j});else{let d=await (0,M.getAction)(a,aF.getBlockNumber,"getBlockNumber")({});g=i&&i!==d?await (0,M.getAction)(a,aV.getLogs,"getLogs")({address:b,args:c,event:e,events:f,fromBlock:i+1n,toBlock:d}):[],i=d}if(0===g.length)return;if(d)h.onLogs(g);else for(let a of g)h.onLogs([a])}catch(a){j&&a instanceof dt.InvalidInputRpcError&&(l=!1),h.onError?.(a)}},{emitOnBegin:!0,interval:k});return async()=>{j&&await (0,M.getAction)(a,cs.uninstallFilter,"uninstallFilter")({filter:j}),m()}})):(n=!0,o=()=>n=!1,(async()=>{try{let d=(()=>{if("fallback"===a.transport.type){let b=a.transport.transports.find(a=>"webSocket"===a.config.type||"ipc"===a.config.type);return b?b.value:a.transport}return a.transport})(),g=f??(e?[e]:void 0),j=[];g&&(j=[g.flatMap(a=>(0,at.encodeEventTopics)({abi:[a],eventName:a.name,args:c}))],e&&(j=j[0]));let{unsubscribe:k}=await d.subscribe({params:["logs",{address:b,topics:j}],onData(a){if(!n)return;let b=a.result;try{let{eventName:a,args:c}=(0,du.decodeEventLog)({abi:g??[],data:b.data,topics:b.topics,strict:q}),d=(0,aS.formatLog)(b,{args:c,eventName:a});i([d])}catch(e){let a,c;if(e instanceof a1.DecodeLogDataMismatch||e instanceof a1.DecodeLogTopicsMismatch){if(l)return;a=e.abiItem.name,c=e.abiItem.inputs?.some(a=>!("name"in a&&a.name))}let d=(0,aS.formatLog)(b,{args:c?[]:{},eventName:a});i([d])}},onError(a){h?.(a)}});o=k,n||o()}catch(a){h?.(a)}})(),()=>o())})(a,b),watchPendingTransactions:b=>(function(a,{batch:b=!0,onError:c,onTransactions:d,poll:e,pollingInterval:f=a.pollingInterval}){let g,h,i;return(void 0!==e?e:"webSocket"!==a.transport.type&&"ipc"!==a.transport.type)?(g=(0,de.stringify)(["watchPendingTransactions",a.uid,b,f]),(0,dq.observe)(g,{onTransactions:d,onError:c},c=>{let d,e=(0,dr.poll)(async()=>{try{if(!d)try{d=await (0,M.getAction)(a,av,"createPendingTransactionFilter")({});return}catch(a){throw e(),a}let f=await (0,M.getAction)(a,aQ.getFilterChanges,"getFilterChanges")({filter:d});if(0===f.length)return;if(b)c.onTransactions(f);else for(let a of f)c.onTransactions([a])}catch(a){c.onError?.(a)}},{emitOnBegin:!0,interval:f});return async()=>{d&&await (0,M.getAction)(a,cs.uninstallFilter,"uninstallFilter")({filter:d}),e()}})):(h=!0,i=()=>h=!1,(async()=>{try{let{unsubscribe:b}=await a.transport.subscribe({params:["newPendingTransactions"],onData(a){if(!h)return;let b=a.result;d([b])},onError(a){c?.(a)}});i=b,h||i()}catch(a){c?.(a)}})(),()=>i())})(a,b)}}function dE(a,b={}){let c=function(a,b={}){try{return a.getClient(b)}catch{return}}(a,b);return c?.extend(dD)}var dF=a.i(86327),dG=a.i(55570);function dH(){let{address:a}=(0,f.useAccount)(),c=(0,i.useChainId)(),e=function(a={}){let b=(0,dG.useConfig)(a);return(0,dF.useSyncExternalStoreWithSelector)(a=>(function(a,b){let{onChange:c}=b;return a.subscribe(()=>dE(a),c,{equalityFn:(a,b)=>a?.uid===b?.uid})})(b,{onChange:a}),()=>dE(b,a),()=>dE(b,a),a=>a,(a,b)=>a?.uid===b?.uid)}(),g=(0,h.getContractAddress)(5003===c?"mantleSepoliaTestnet":"mantleMainnet","serviceCreditToken"),[k,l]=(0,j.useState)([]),[m,o]=(0,j.useState)("all"),[p,q]=(0,j.useState)(!1);if((0,j.useEffect)(()=>{a&&e&&(async()=>{q(!0);try{let b=[];for(let c of(await e.getLogs({address:g,event:{type:"event",name:"TransferSingle",inputs:[{type:"address",indexed:!0,name:"operator"},{type:"address",indexed:!0,name:"from"},{type:"address",indexed:!0,name:"to"},{type:"uint256",indexed:!1,name:"id"},{type:"uint256",indexed:!1,name:"value"}]},fromBlock:BigInt(0),toBlock:"latest"}))){let{from:d,to:f,id:g,value:h}=c.args;if(f===a||d===a){let i=await e.getBlock({blockNumber:c.blockNumber}),j=Number(i.timestamp),k=new Date(1e3*j),l=(0,n.getServiceMetadata)(Number(g)),m=l?.name||`Service #${g}`,o=l?.brand||"Unknown Business",p="Transfer",q="Completed";"0x0000000000000000000000000000000000000000"===d?(p="Purchase",q="Active"):"0x0000000000000000000000000000000000000000"===f?(p="Burn",q="Completed"):f===a?(p="Received",q="Active"):d===a&&(p="Sent",q="Completed"),b.push({date:k.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),type:p,service:m,business:o,amount:Number(h).toString(),status:q,tokenId:Number(g),timestamp:j})}}try{for(let c of(await e.getLogs({address:g,event:{type:"event",name:"ServiceRedeemed",inputs:[{type:"uint256",indexed:!0,name:"tokenId"},{type:"address",indexed:!0,name:"customer"},{type:"uint256",indexed:!1,name:"amount"}]},fromBlock:BigInt(0),toBlock:"latest"}))){let{tokenId:d,customer:f,amount:g}=c.args;if(f===a){let a=await e.getBlock({blockNumber:c.blockNumber}),f=Number(a.timestamp),h=new Date(1e3*f),i=(0,n.getServiceMetadata)(Number(d)),j=i?.name||`Service #${d}`,k=i?.brand||"Unknown Business";b.push({date:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),type:"Redemption",service:j,business:k,amount:Number(g).toString(),status:"Completed",tokenId:Number(d),timestamp:f})}}}catch(a){console.log("No redemption events found")}b.sort((a,b)=>b.timestamp-a.timestamp),l(b)}catch(a){console.error("Error fetching transaction history:",a)}finally{q(!1)}})()},[a,e,g]),!a)return(0,b.jsx)(d.Card,{className:"p-8 text-center border-2",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Connect your wallet to view transaction history"})});let r=k.filter(a=>"all"===m||("purchases"===m?"Purchase"===a.type:"redemptions"===m?"Redemption"===a.type:"transfers"!==m||"Transfer"===a.type||"Sent"===a.type||"Received"===a.type));return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Transaction History"}),(0,b.jsxs)("select",{className:"px-4 py-2 border border-input bg-background text-sm rounded-md",value:m,onChange:a=>o(a.target.value),children:[(0,b.jsx)("option",{value:"all",children:"All Transactions"}),(0,b.jsx)("option",{value:"purchases",children:"Purchases"}),(0,b.jsx)("option",{value:"redemptions",children:"Redemptions"}),(0,b.jsx)("option",{value:"transfers",children:"Transfers"})]})]}),p?(0,b.jsx)(d.Card,{className:"p-8 text-center border-2",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading transaction history..."})}):0===r.length?(0,b.jsxs)(d.Card,{className:"p-8 text-center border-2 border-dashed",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-2",children:"No transactions found"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"all"===m?"Purchase some service tokens to get started":`No ${m} to display`})]}):(0,b.jsx)(d.Card,{className:"border-2",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"border-b border-border",children:(0,b.jsxs)("tr",{className:"text-left",children:[(0,b.jsx)("th",{className:"p-4 text-sm font-medium",children:"Date"}),(0,b.jsx)("th",{className:"p-4 text-sm font-medium",children:"Type"}),(0,b.jsx)("th",{className:"p-4 text-sm font-medium",children:"Service"}),(0,b.jsx)("th",{className:"p-4 text-sm font-medium",children:"Business"}),(0,b.jsx)("th",{className:"p-4 text-sm font-medium",children:"Amount"}),(0,b.jsx)("th",{className:"p-4 text-sm font-medium",children:"Status"})]})}),(0,b.jsx)("tbody",{children:r.map((a,c)=>(0,b.jsxs)("tr",{className:"border-b border-border last:border-0 hover:bg-muted/50",children:[(0,b.jsx)("td",{className:"p-4 text-sm",children:a.date}),(0,b.jsx)("td",{className:"p-4 text-sm",children:(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${"Purchase"===a.type||"Received"===a.type?"bg-accent/10 text-accent":"bg-muted text-muted-foreground"}`,children:a.type})}),(0,b.jsx)("td",{className:"p-4 text-sm font-medium",children:a.service}),(0,b.jsx)("td",{className:"p-4 text-sm text-muted-foreground",children:a.business}),(0,b.jsxs)("td",{className:"p-4 text-sm font-bold",children:[a.amount," token","1"!==a.amount?"s":""]}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${"Active"===a.status?"bg-accent/10 text-accent":"Completed"===a.status?"bg-muted text-muted-foreground":"bg-destructive/10 text-destructive"}`,children:a.status})})]},c))})]})})})]})}function dI(){return(0,b.jsxs)("main",{className:"min-h-screen bg-muted/30",children:[(0,b.jsx)(c.Navigation,{}),(0,b.jsx)("section",{className:"pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Customer Portal"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Browse, purchase, and redeem service tokens"})]}),(0,b.jsx)(k,{}),(0,b.jsxs)(e.Tabs,{defaultValue:"browse",className:"space-y-6",children:[(0,b.jsxs)(e.TabsList,{className:"bg-card border border-border",children:[(0,b.jsx)(e.TabsTrigger,{value:"browse",children:"Browse Services"}),(0,b.jsx)(e.TabsTrigger,{value:"wallet",children:"My Wallet"}),(0,b.jsx)(e.TabsTrigger,{value:"redeem",children:"Redeem Token"}),(0,b.jsx)(e.TabsTrigger,{value:"history",children:"History"})]}),(0,b.jsx)(e.TabsContent,{value:"browse",className:"space-y-6",children:(0,b.jsx)(p,{})}),(0,b.jsxs)(e.TabsContent,{value:"wallet",className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-between items-center",children:(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"My Service Tokens"})}),(0,b.jsx)(t,{})]}),(0,b.jsx)(e.TabsContent,{value:"redeem",className:"space-y-6",children:(0,b.jsxs)(d.Card,{className:"p-12 border-2 border-dashed max-w-2xl mx-auto text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Redeem Service Token"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-2",children:"Redemption functionality requires Oracle integration"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"This will be available after deploying the Redemption Oracle contract"})]})}),(0,b.jsx)(e.TabsContent,{value:"history",className:"space-y-6",children:(0,b.jsx)(dH,{})})]})]})})]})}a.s(["default",()=>dI],29607)}];

//# sourceMappingURL=frontend_app_customer_page_tsx_cec9ddae._.js.map